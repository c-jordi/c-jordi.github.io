{"version":3,"sources":["Simulation/logic/utils/prototypes.js","ControlBar/Icons/play.svg","ControlBar/Icons/pause.svg","ControlBar/Icons/refresh.svg","Documentation/Ressources/fig1.svg","Documentation/Ressources/fig2.svg","Documentation/Ressources/fig6.svg","Documentation/Ressources/fig7.svg","Documentation/Ressources/fig7a.svg","Documentation/Ressources/fig7b.svg","Documentation/Ressources/fig7c.svg","Documentation/Ressources/fig7d.svg","Documentation/Ressources/fig3.svg","Documentation/Ressources/fig4.svg","Documentation/Ressources/fig5.svg","Documentation/Ressources/fig8.svg","Documentation/Ressources/onoff.png","Documentation/Ressources/switch.png","Documentation/Ressources/density.png","Documentation/Ressources/switchA.png","Documentation/Ressources/switchB.png","Display/Icons/settings.svg","Display/Icons/nodes.svg","Display/Icons/paths.svg","Display/Icons/tabs.svg","InfoBar/Icons/bright.svg","Display/Icons/time.svg","Display/Icons/params.svg","Simulation/logic/utils/generateField.js","Simulation/logic/utils/generateInitialFields.js","Simulation/logic/utils/tools.js","Simulation/logic/environment/Environment.js","Simulation/logic/walkers/Walker.js","Simulation/logic/walkers/WalkingSquad.js","Simulation/logic/nodes/Nodes.js","Simulation/logic/utils/ratioOfNorms.js","Simulation/logic/engine/Euler.js","Simulation/logic/engine/Engine.js","Simulation/logic/analysis/algorithms/BurningTree.js","Simulation/logic/analysis/Connectivity.js","Simulation/logic/analysis/Analysis.js","Simulation/logic/analysis/Database.js","Simulation/logic/animation/Loop.js","Simulation/logic/controller/Controller.js","Simulation/logic/playgrounds/fig3.js","Simulation/context/SimulationContext.js","Simulation/context/StatsContext.js","ControlBar/index.js","Header/Header.js","Title/TotalMetrics.js","Title/Title.js","layout.js","Documentation/Preview/index.js","Documentation/Preview/draw.js","Documentation/Sections/Header.js","Documentation/Sections/Introduction.js","Documentation/Sections/Formula.js","Documentation/Sections/NetworkGeneration.js","Documentation/Sections/Images.js","Documentation/Sections/ComputationalModel.js","Documentation/Sections/Implementation.js","Documentation/Sections/Analysis.js","Documentation/Sections/Bibliography.js","Documentation/Sections/Conclusion.js","Documentation/index.js","About.js","Display/Menu/index.js","Display/Screen/Inputs/index.js","Display/Screen/Settings/index.js","Display/Screen/Environment/index.js","Display/Screen/Layers/index.js","Display/Screen/Layout/Preset/index.js","Display/Screen/Layout/Preset/draw.js","Display/Screen/Layout/index.js","Display/Screen/Stage/native/js/draw.js","Display/Screen/Stage/native/index.js","Display/Screen/Stage/index.js","Display/Screen/Analysis/Plots/Connectivity.js","Display/Screen/Analysis/Plots/index.js","Display/Screen/Analysis/index.js","Display/Screen/index.js","Display/index.js","InfoBar/BatchSimulation/index.js","InfoBar/index.js","Main.js","Footer/index.js","App.js","serviceWorker.js","index.js"],"names":["Array","prototype","indexOfRand","value","indexArray","this","indexOf","push","length","Math","floor","random","module","exports","generateField","size","fill","map","el","isArray","slice","isNaN","generateInitialFields","buffer","copy","obj","JSON","parse","stringify","uuid","replace","c","r","toString","Environment","alpha","beta","k","nodes","list","name","state","coord","layout","lattice","position","epsilon","s0","framerate","hitBox","freeze","timeSinceStart","fields","positive","negative","fieldsDt","fieldsDx","nodesCenter","undefined","nodeColor","default","allowedSteps","init","getEmission","t","exp","setStartingState","apply","func","forEach","x","y","setStartingPosition","setPosition","includes","assignState","walker","latx","laty","node","timeSinceCollision","makeNodesCenter","filter","reset","resetFields","resetFieldsDt","resetFieldsDx","clearFields","noiseStep","angle","PI","eps","sqrt","cos","sin","discreteStep","step","scalarProduct","mvt","maxScalarProduct","max","stepIndex","clear","Walker","dr","pathColor","WalkingSquad","numberOfAgents","environment","env","squad","createSquad","i","createWalker","newX","newY","newState","removeWalker","count","number","addWalker","setPopulation","population","Number","isInteger","popDiff","resetPath","xpath","ypath","resetDr","Nodes","addRandom","bind","layoutId","add","toggle","remove","assign","props","maxX","maxY","ratioOfNorms","arr1","arr2","Euler","walkers","timeMap","run","computeFieldsDx","computeFieldsDt","computeWalkersDr","computeEulerFields","computeEulerWalkers","getPosition","inputFrame","outputFrame","fieldStep","fieldState","fieldWalkerStep","fieldNoiseRatio","addResidues","addEmissions","newTime","x_minus","x_plus","y_minus","y_plus","Engine","engine","database","analysis","running","toLowerCase","setup","counter","restart","console","log","next","saveMetrics","stop","BurningTree","matrix","campfires","rows","cols","forest","maxPathLength","A","edges","connect","campfire","burnForest","stack","explore","camp","xtar","ytar","getNeighbors","shift","checkCampfire","neighbor","diag","up","left","right","down","diags","Connectivity","connectivityThreshold","adjencyMatrix","hoshenKopelman","filterUsingThreshold","combinedField","j","filteredField","time","version","burningTree","nbrEdges","row","reduce","a","b","E","Analysis","sessions","maxima","min","maxMinThreshold","interval","events","displayOptions","showWalkers","showNodes","showCombinedFields","showPositiveField","showNegativeField","defaultColor","positiveColor","negativeColor","combinedColor","fineGrain","connectivity","combineFields","computeMaxima","flat","checkEvents","edge","event","applyEvent","type","Database","callback","save","round","Loop","id","defaultCallback","setId","minInt","maxFrames","frame","start","request","window","requestAnimationFrame","startTime","performance","now","slowMo","Controller","worker","loop","loopCallback","updates","ui","game","back","setRequestId","useCallback","useRedraw","toggleEngine","setContrast","setParams","setLayout","getEnv","setEnv","getLayers","val","setLayers","useSlowMo","contrast","params","key","setEvents","setDefaultParams","param","reqId","data","redraw","setupLoop","setupRedraw","stopLoop","cancelAnimationFrame","startLoop","simulationContext","createContext","SimulationContextProvider","children","envir","controller","Provider","statsContext","StatsContextProvider","useState","stats","setStats","updateStats","numberOfAnts","ControlBar","Link","useContext","progressStyle","stage","backgroundColor","width","className","alt","src","PauseIcon","PlayIcon","onClick","style","to","RestartIcon","Header","role","aria-label","TotalMetrics","marginTop","href","data-icon","Title","layouts","title","group","col","withRouter","imgRef","useRef","preset","find","useEffect","canvas","ctx","getContext","height","xscale","yscale","scale","xoffset","yoffset","fillStyle","fillRect","ceil","drawNodes","current","history","ref","text","Introduction","class","data-line-start","data-line-end","Formula","tex","Node","formula","IFormula","inline","NetworkGeneration","Fig1","fontSize","Fig2","Images","imageSrcs","index","setIndex","totalImages","setTimeout","ComputationalModel","Fig6","Fig7","Fig7a","Fig7b","Fig7c","Fig7d","Implementation","Fig3","Fig4","Fig5","SwitchImg","OnOffImg","Fig8","DensityImg","SwitchAImg","SwitchBImg","Bibliography","Conclusion","Documentation","About","MenuContainer","MenuItem","icon","menuClick","isActive","FloatInput","setState","label","placeholder","maxDigits","onChange","target","PairIntInput","handleChange","ind","stateCopy","IntInput","SubmitButton","active","ColorInput","split","join","color","s","Option","getColor","Switch","defaultChecked","Settings","framesPerSecond","settings","setSettings","inputFor","closeMenu","modified","Layers","PresetBox","Preset","canvasRef","Layout","maxGroup","groups","createPreset","generateLayout","DrawFunc","isSetup","uiCtx","gameCtx","backCtx","offsetX","offsetY","versions","draw","adjustScale","scalex","scaley","strokeColor","point","strokeStyle","drawWalkers","drawCombinedFields","fieldStrength","fieldColor","hexToRGB","transform","drawPositiveField","drawNegativeField","clearAll","clearRect","dO","tr","log10","h","g","memo","uiRef","gameRef","backgroundRef","d","str","randomString","Stage","fixHeight","margin","offset","axisStep","tickStep","colorArray","Plot","origin","YAxisEnd","XAxisEnd","xScale","yScale","xMousePosition","yMousePosition","cursorTime","setAxis","setMousePosition","setXAxis","setYAxis","yAxisPoints","useAxisLineStyle","makeLineThroughPoints","xAxisPoints","points","beginPath","moveTo","lineTo","stroke","closePath","lineWidth","findVersions","setScale","addAxisTicks","addPoints","getMaxValues","roundMaxValues","determineScale","getMaxValueForProperty","property","roundedWidth","roundedHeight","getXScale","getYScale","addXTicks","addYTicks","yinv","yPixel","xinv","xPixel","numberOfTicks","drawVerticalTick","xTick","yTick","tickTextSize","writeTickText","drawHorizontalTick","useTickLineStyle","linePoints","useTickTextStyle","fillText","font","drawPoints","usePointStyle","drawCircle","arc","layerX","layerY","offsetWidth","offsetHeight","processMouse","clearCursor","isMouseInChart","checkMouseNeighborhood","setCursor","xCondition","yCondition","distance","neighborTime","delay","abs","minMouseToPointDistance","mouseNeighborTime","isMouseNearPoint","drawCursor","useCursorStyle","xCursor","cursorStart","cursorEnd","plotRef","ConnectivityPlot","addEventListener","removeEventListener","prevProps","nextProps","connectivityData","Screen","display","renderPage","Display","chooseWidth","setDisplay","innerWidth","screenWidth","setScreenWidth","onResize","TabsIcon","SettingsIcon","NodesIcon","PathIcon","BatchSimulation","frames","setFrames","runs","setRuns","Fragment","defaultValue","paramSubset","getParamSubset","serializedQuery","p","hasOwnProperty","encodeURIComponent","serialize","open","location","InfoBar","flexGrow","AntBar","BrightIcon","Main","updateWindowDimensions","Component","Footer","App","path","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.e354db29.chunk.js","sourcesContent":["Array.prototype.indexOfRand = function(value) {\n\tlet indexArray = [];\n\tlet array = this;\n\twhile (array.indexOf(value) > -1) {\n\t\tindexArray.push(array.indexOf(value));\n\t\tarray[array.indexOf(value)] = null;\n\t}\n\tif (indexArray.length)\n\t\treturn indexArray[Math.floor(Math.random() * indexArray.length)];\n\treturn -1;\n};\n","module.exports = __webpack_public_path__ + \"static/media/play.7bbe5af1.svg\";","module.exports = __webpack_public_path__ + \"static/media/pause.688665c9.svg\";","module.exports = __webpack_public_path__ + \"static/media/refresh.d4ae3415.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig1.83cf0f8d.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig2.e0bda945.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig6.c2c3be21.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig7.f185d081.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig7a.2d71b623.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig7b.e27c6d69.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig7c.63dd3b41.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig7d.2476b884.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig3.ebebc660.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig4.cb65af20.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig5.db731d43.svg\";","module.exports = __webpack_public_path__ + \"static/media/fig8.6b379dd6.svg\";","module.exports = __webpack_public_path__ + \"static/media/onoff.57d2d9a6.png\";","module.exports = __webpack_public_path__ + \"static/media/switch.8b527ad5.png\";","module.exports = __webpack_public_path__ + \"static/media/density.6d13b1b3.png\";","module.exports = __webpack_public_path__ + \"static/media/switchA.52ac6d7f.png\";","module.exports = __webpack_public_path__ + \"static/media/switchB.71460809.png\";","module.exports = __webpack_public_path__ + \"static/media/settings.d0aa06bb.svg\";","module.exports = __webpack_public_path__ + \"static/media/nodes.41fdbad6.svg\";","module.exports = __webpack_public_path__ + \"static/media/paths.a258a0d3.svg\";","module.exports = __webpack_public_path__ + \"static/media/tabs.03fda4e2.svg\";","module.exports = __webpack_public_path__ + \"static/media/bright.eaa30e73.svg\";","module.exports = __webpack_public_path__ + \"static/media/time.726e4414.svg\";","module.exports = __webpack_public_path__ + \"static/media/params.3a16a20c.svg\";","export default function generateField(size = [100, 100], fill = null) {\n\treturn Array(size[0])\n\t\t.fill(0)\n\t\t.map(el => {\n\t\t\tif (Array.isArray(fill)) {\n\t\t\t\treturn Array(size[1])\n\t\t\t\t\t.fill(0)\n\t\t\t\t\t.map(el => fill.slice());\n\t\t\t}\n\t\t\tif (!isNaN(fill)) {\n\t\t\t\treturn Array(size[1]).fill(fill);\n\t\t\t}\n\n\t\t\treturn Array(size[1]);\n\t\t});\n}\n","import generateField from \"./generateField\";\n\nexport default function generateInitialFields(buffer, size, fill = null) {\n\treturn Array(buffer)\n\t\t.fill(0)\n\t\t.map(el => {\n\t\t\treturn generateField(size, fill);\n\t\t});\n}\n","export const copy = (obj) => {\n\treturn JSON.parse(JSON.stringify(obj));\n};\n\nexport const uuid = () => {\n\treturn \"xxxxxxxx\".replace(/[xy]/g, function (c) {\n\t\tvar r = (Math.random() * 16) | 0,\n\t\t\tv = c === \"x\" ? r : (r & 0x3) | 0x8;\n\t\treturn v.toString(16);\n\t});\n};\n","import generateField from \"../utils/generateField\";\nimport generateInitialFields from \"../utils/generateInitialFields\";\nimport displayArray from \"../utils/displayArray\";\nimport \"../utils/prototypes\";\nimport { copy } from \"../utils/tools\";\n\nfunction Environment({\n\talpha = 1,\n\tbeta = 0.2,\n\tk = 0.01,\n\tnodes = {\n\t\tlist: [\n\t\t\t{ name: \"node_1\", state: 1, coord: [15, 1] },\n\t\t\t{ name: \"node_2\", state: -1, coord: [29, 1] },\n\t\t],\n\t},\n\tlayout: { size = [30, 30], lattice = \"square\", position = \"discrete\" },\n\tepsilon = 0.5,\n\ts0 = 25000,\n}) {\n\tthis.size = size;\n\tthis.alpha = alpha;\n\tthis.beta = beta;\n\tthis.k = k;\n\tthis.epsilon = epsilon;\n\tthis.s0 = s0;\n\tthis.framerate = 30;\n\tthis.position = position;\n\tthis.hitBox = 1;\n\n\tthis.freeze = false;\n\n\tthis.lattice = lattice;\n\n\tthis.timeSinceStart = 0;\n\n\tthis.fields = {\n\t\tpositive: generateInitialFields(5, this.size, 0),\n\t\tnegative: generateInitialFields(5, this.size, 0),\n\t};\n\n\tthis.fieldsDt = {\n\t\tpositive: generateInitialFields(5, this.size, 0),\n\t\tnegative: generateInitialFields(5, this.size, 0),\n\t};\n\n\tthis.fieldsDx = {\n\t\tpositive: generateInitialFields(5, this.size, [0, 0]),\n\t\tnegative: generateInitialFields(5, this.size, [0, 0]),\n\t};\n\n\tthis.nodes = nodes;\n\n\tthis.nodesCenter = undefined;\n\n\tthis.nodeColor = {\n\t\tpositive: [246, 255, 51],\n\t\tnegative: [51, 255, 240],\n\t\tdefault: [255, 255, 255],\n\t};\n\n\tthis.allowedSteps = [\n\t\t[-1, 0],\n\t\t[0, 1],\n\t\t[1, 0],\n\t\t[0, -1],\n\t];\n\n\tthis.init();\n}\n\nEnvironment.prototype.getEmission = function (t) {\n\treturn this.s0 * Math.exp((-this.beta * t * 2) / 2);\n};\n\nEnvironment.prototype.setStartingState = function (state) {\n\tif (state == \"rand\") {\n\t\tstate = Math.floor(Math.random() * 2) ? \"positive\" : \"negative\";\n\t}\n\treturn state;\n};\n\nEnvironment.prototype.apply = function (func) {\n\t// Loops over state,x,y\n\t[\"positive\", \"negative\"].forEach((state) => {\n\t\tfor (let x = 0; x < this.size[0]; x++) {\n\t\t\tfor (let y = 0; y < this.size[1]; y++) {\n\t\t\t\tfunc(state, x, y);\n\t\t\t}\n\t\t}\n\t});\n};\n\nEnvironment.prototype.setStartingPosition = function (x, y) {\n\tif (x == \"rand\") {\n\t\tx = Math.random() * this.size[0];\n\t}\n\tif (y == \"rand\") {\n\t\ty = Math.random() * this.size[1];\n\t}\n\tif (this.position === \"continuous\") {\n\t\treturn [x, y];\n\t}\n\treturn this.setPosition(x, y);\n};\n\nEnvironment.prototype.setPosition = function (x, y) {\n\tif (this.lattice == \"square\") {\n\t\treturn [Math.floor(x), Math.floor(y)];\n\t}\n\tif (this.lattice.includes(\"trian\")) {\n\t\tif (x % 2) {\n\t\t\ty = 4 * Math.floor(y / 4) + 2;\n\t\t} else {\n\t\t\ty = 4 * Math.floor(y / 4);\n\t\t}\n\t\treturn [x, y];\n\t}\n};\n\nEnvironment.prototype.assignState = function (walker) {\n\tconst [latx, laty] = this.setPosition(walker.x, walker.y);\n\tthis.nodesCenter.positive.forEach((node) => {\n\t\tif (\n\t\t\tnode[0] - this.hitBox <= latx &&\n\t\t\tnode[0] + this.hitBox >= latx &&\n\t\t\tnode[1] - this.hitBox <= laty &&\n\t\t\tnode[1] + this.hitBox >= laty\n\t\t) {\n\t\t\twalker.state = \"positive\";\n\t\t\twalker.timeSinceCollision = 0;\n\t\t}\n\t});\n\tthis.nodesCenter.negative.forEach((node) => {\n\t\tif (\n\t\t\tnode[0] - this.hitBox <= latx &&\n\t\t\tnode[0] + this.hitBox >= latx &&\n\t\t\tnode[1] - this.hitBox <= laty &&\n\t\t\tnode[1] + this.hitBox >= laty\n\t\t) {\n\t\t\twalker.state = \"negative\";\n\t\t\twalker.timeSinceCollision = 0;\n\t\t}\n\t});\n};\n\nEnvironment.prototype.makeNodesCenter = function () {\n\tthis.nodesCenter = {\n\t\tpositive: this.nodes.list\n\t\t\t.filter((node) => node.state === 1)\n\t\t\t.map((node) => node.coord),\n\t\tnegative: this.nodes.list\n\t\t\t.filter((node) => node.state === -1)\n\t\t\t.map((node) => node.coord),\n\t};\n};\n\nEnvironment.prototype.init = function () {\n\tthis.makeNodesCenter();\n};\n\nEnvironment.prototype.reset = function () {\n\tthis.resetFields();\n\tthis.resetFieldsDt();\n\tthis.resetFieldsDx();\n};\n\nEnvironment.prototype.clearFields = function () {\n\tthis.fields = {\n\t\tpositive: generateInitialFields(5, this.size, 0),\n\t\tnegative: generateInitialFields(5, this.size, 0),\n\t};\n};\n\nEnvironment.prototype.resetFields = function () {\n\tthis.fields = {\n\t\tpositive: [\n\t\t\tthis.fields.positive[0],\n\t\t\t...generateInitialFields(4, this.size, 0),\n\t\t],\n\t\tnegative: [\n\t\t\tthis.fields.negative[0],\n\t\t\t...generateInitialFields(4, this.size, 0),\n\t\t],\n\t};\n};\n\nEnvironment.prototype.resetFieldsDx = function () {\n\tthis.fieldsDx = {\n\t\tpositive: generateInitialFields(5, this.size, [0, 0]),\n\t\tnegative: generateInitialFields(5, this.size, [0, 0]),\n\t};\n};\n\nEnvironment.prototype.resetFieldsDt = function () {\n\tthis.fieldsDt = {\n\t\tpositive: generateInitialFields(5, this.size, 0),\n\t\tnegative: generateInitialFields(5, this.size, 0),\n\t};\n};\n\nEnvironment.prototype.noiseStep = function () {\n\tconst angle = Math.random() * 2 * Math.PI;\n\tconst eps = Math.sqrt(2 * this.epsilon);\n\treturn [eps * Math.cos(angle), eps * Math.sin(angle)];\n};\n\nEnvironment.prototype.discreteStep = function (step) {\n\tif (step == [0, 0]) return [0, 0];\n\tconst scalarProduct = this.allowedSteps.map((mvt) => {\n\t\treturn mvt[0] * step[0] + mvt[1] * step[1];\n\t});\n\n\tconst maxScalarProduct = Math.max(...scalarProduct);\n\tconst stepIndex = scalarProduct.indexOfRand(maxScalarProduct);\n\n\treturn this.allowedSteps[stepIndex];\n};\n\nEnvironment.prototype.clear = function () {\n\tthis.clearFields();\n\tthis.resetFieldsDt();\n\tthis.resetFieldsDx();\n\tthis.makeNodesCenter();\n\tthis.timeSinceStart = 0;\n};\n\nexport default Environment;\n","function Walker(name, x, y, state) {\n\tthis.name = name;\n\tthis.state = state; // string [\"positive\",\"negative\"]\n\tthis.timeSinceCollision = 0;\n\tthis.x = x;\n\tthis.y = y;\n\tthis.dr = Array(4).fill(null);\n\tthis.pathColor = [255, 255, 255];\n}\n\nexport default Walker;\n","import Walker from \"./Walker\";\n\nfunction WalkingSquad(numberOfAgents, environment, x, y, state) {\n\tthis.numberOfAgents = numberOfAgents;\n\tthis.state = state;\n\tthis.env = environment;\n\tthis.x = x;\n\tthis.y = y;\n\tthis.squad = [];\n\tthis.createSquad();\n}\n\nWalkingSquad.prototype.createSquad = function() {\n\tfor (let i = 0; i < this.numberOfAgents; i++) {\n\t\tthis.squad.push(this.createWalker(`Walker_${i}`));\n\t}\n};\n\nWalkingSquad.prototype.createWalker = function(name) {\n\tconst [newX, newY] = this.env.setStartingPosition(this.x, this.y);\n\tconst newState = this.env.setStartingState(this.state);\n\n\treturn new Walker(name, newX, newY, newState);\n};\n\nWalkingSquad.prototype.removeWalker = function(count = 1) {\n\tif (count === 0) return;\n\tif (this.squad.length) {\n\t\tconst number = this.squad.length < count ? this.squad.length : count;\n\t\tthis.squad = this.squad.slice(0, -number);\n\t}\n\tthis.numberOfAgents = this.squad.length;\n};\n\nWalkingSquad.prototype.addWalker = function(count = 1) {\n\tfor (let i = 0; i < count; i++) {\n\t\tthis.squad.push(this.createWalker(`Walker_${this.squad.length + i}`));\n\t}\n\tthis.numberOfAgents = this.squad.length;\n};\n\nWalkingSquad.prototype.setPopulation = function(population) {\n\tif (!Number.isInteger(population)) return;\n\tconst popDiff = population - this.numberOfAgents;\n\tpopDiff > 0 ? this.addWalker(popDiff) : this.removeWalker(-popDiff);\n};\n\nWalkingSquad.prototype.resetPath = function() {\n\tfor (let i = 0; i < this.numberOfAgents; i++) {\n\t\tthis.squad[i].xpath = [this.squad[i].x, ...Array(4).fill(0)];\n\t\tthis.squad[i].ypath = [this.squad[i].y, ...Array(4).fill(0)];\n\t}\n};\n\nWalkingSquad.prototype.apply = function(func) {\n\t// Applies on each walker\n\tfor (let i = 0; i < this.numberOfAgents; i++) {\n\t\tfunc(this.squad[i]);\n\t}\n};\n\nWalkingSquad.prototype.resetDr = function() {\n\tfor (let i = 0; i < this.numberOfAgents; i++) {\n\t\tthis.squad[i].dr = Array(4).fill(null);\n\t}\n};\nWalkingSquad.prototype.reset = function() {\n\tthis.squad = [];\n\tthis.createSquad();\n};\n\nexport default WalkingSquad;\n","function Nodes() {\n\tthis.list = [];\n\tthis.addRandom = this.addRandom.bind(this);\n}\n\nNodes.prototype.default = function () {\n\tthis.layoutId = \"Switch\";\n\tthis.add(\"node_1\", 1, [15, 7]);\n\tthis.add(\"node_2\", -1, [15, 22]);\n};\n\nNodes.prototype.toggle = function (node) {\n\tif (this.includes(node.name)) {\n\t\tthis.remove(node.name);\n\t} else {\n\t\tthis.add(node.name, node.state, node.coord);\n\t}\n};\n\nNodes.prototype.includes = function (name) {\n\treturn this.list.map((node) => node.name).includes(name);\n};\n\nNodes.prototype.add = function (name, state, [x, y]) {\n\tthis.list.push({\n\t\tname,\n\t\tstate,\n\t\tcoord: [x, y],\n\t});\n};\n\nNodes.prototype.remove = function (name) {\n\tif (name === undefined) return;\n\tthis.list = this.list.filter((node) => node.name !== name);\n};\n\nNodes.prototype.assign = function (name, props) {\n\tif (name === undefined) return;\n\tthis.list = this.list.map((node) => ({\n\t\t...node,\n\t\t...(node.name === name ? props : {}),\n\t}));\n};\n\nNodes.prototype.addRandom = function (maxX, maxY) {\n\tthis.add(`Node_${this.list.length}`, Math.random() * 2 > 1 ? 1 : -1, [\n\t\tMath.floor(Math.random() * maxX),\n\t\tMath.floor(Math.random() * maxY),\n\t]);\n};\n\nexport default Nodes;\n","const ratioOfNorms = (arr1, arr2) => {\n\tconst normArr1 = Math.sqrt(arr1[0] ** 2 + arr1[1] ** 2);\n\tconst normArr2 = Math.sqrt(arr2[0] ** 2 + arr2[1] ** 2);\n\treturn normArr1 / normArr2;\n};\nexport default ratioOfNorms;\n","import ratioOfNorms from \"../utils/ratioOfNorms\";\n\nfunction Euler(env, walkers) {\n\tthis.env = env;\n\tthis.walkers = walkers;\n\tthis.timeMap = [0];\n}\n\nEuler.prototype.run = function () {\n\tthis.computeFieldsDx(0, 0);\n\tthis.computeFieldsDt(0, 0);\n\tthis.computeWalkersDr(0, 0);\n\tthis.computeEulerFields();\n\tthis.computeEulerWalkers();\n\tthis.env.timeSinceStart++;\n};\n\nEuler.prototype.computeEulerFields = function () {\n\tconst computeEulerField = (state, x, y) => {\n\t\tthis.env.fields[state][0][x][y] =\n\t\t\tthis.env.fields[state][0][x][y] + this.env.fieldsDt[state][0][x][y];\n\t};\n\n\tthis.env.apply(computeEulerField);\n};\n\nEuler.prototype.getPosition = function () {};\n\nEuler.prototype.computeEulerWalkers = function () {\n\tconst computeEulerWalker = (walker) => {\n\t\twalker.timeSinceCollision += 1;\n\t\twalker.x =\n\t\t\t(walker.x + walker.dr[0][0] + this.env.size[0]) % this.env.size[0];\n\t\twalker.y =\n\t\t\t(walker.y + walker.dr[0][1] + this.env.size[1]) % this.env.size[1];\n\n\t\tthis.env.assignState(walker);\n\t};\n\tthis.walkers.apply(computeEulerWalker);\n};\n\nEuler.prototype.computeWalkersDr = function (inputFrame, outputFrame) {\n\tconst computeWalkerDr = (walker) => {\n\t\tconst fieldWalkerStep = (state, x, y) => {\n\t\t\tif (state == 0) return [0, 0];\n\t\t\tconst fieldState = state == \"negative\" ? \"positive\" : \"negative\";\n\t\t\tconst [latx, laty] = this.env.setPosition(x, y);\n\n\t\t\treturn this.env.fieldsDx[fieldState][inputFrame][latx][laty].map(\n\t\t\t\t(el) => el * this.env.alpha\n\t\t\t);\n\t\t};\n\n\t\tconst [state, x, y] = [walker.state, walker.x, walker.y];\n\t\tconst fieldStep = fieldWalkerStep(state, x, y);\n\t\tconst noiseStep = this.env.noiseStep();\n\n\t\tif (this.env.position == \"discrete\") {\n\t\t\tconst discreteStep = this.env.discreteStep([\n\t\t\t\tfieldStep[0] + noiseStep[0],\n\t\t\t\tfieldStep[1] + noiseStep[1],\n\t\t\t]);\n\n\t\t\twalker.dr[outputFrame] = discreteStep;\n\t\t} else {\n\t\t\twalker.dr[outputFrame] = [\n\t\t\t\tfieldStep[0] + noiseStep[0],\n\t\t\t\tfieldStep[1] + noiseStep[1],\n\t\t\t];\n\t\t}\n\n\t\tconst fieldNoiseRatio = ratioOfNorms(fieldStep, noiseStep);\n\t\tif (fieldNoiseRatio < 1) {\n\t\t\twalker.pathColor = [255, 255, 255];\n\t\t} else if (fieldNoiseRatio > 1 && fieldNoiseRatio < 2) {\n\t\t\twalker.pathColor = [\n\t\t\t\t255,\n\t\t\t\t...[255, 255].map((el) => el * (2 - fieldNoiseRatio)),\n\t\t\t];\n\t\t} else {\n\t\t\twalker.pathColor = [255, 0, 0];\n\t\t}\n\t};\n\n\tthis.walkers.apply(computeWalkerDr);\n};\n\nEuler.prototype.computeFieldsDt = function (inputFrame, outputFrame) {\n\tthis.addResidues(inputFrame, outputFrame);\n\tthis.addEmissions(inputFrame, outputFrame);\n};\n\nEuler.prototype.addResidues = function (inputFrame, outputFrame) {\n\tconst addResidue = (state, x, y) => {\n\t\tthis.env.fieldsDt[state][outputFrame][x][y] =\n\t\t\t-this.env.k * this.env.fields[state][inputFrame][x][y];\n\t};\n\n\tthis.env.apply(addResidue);\n};\n\nEuler.prototype.addEmissions = function (inputFrame, outputFrame) {\n\tconst addEmission = (walker) => {\n\t\tconst [state, x, y, timeSinceCollision] = [\n\t\t\twalker.state,\n\t\t\twalker.x,\n\t\t\twalker.y,\n\t\t\twalker.timeSinceCollision,\n\t\t];\n\t\tconst [latx, laty] = this.env.setPosition(x, y);\n\n\t\tif (state != \"positive\" && state != \"negative\") return;\n\n\t\tconst newTime = timeSinceCollision + this.timeMap[inputFrame];\n\t\tthis.env.fieldsDt[state][outputFrame][latx][laty] += this.env.getEmission(\n\t\t\tnewTime * 2\n\t\t);\n\t};\n\tthis.walkers.apply(addEmission);\n};\n\nEuler.prototype.computeFieldsDx = function (inputFrame, outputFrame) {\n\tconst computePointDx = (state, x, y) => {\n\t\tconst x_minus = (x - 1 + this.env.size[0]) % this.env.size[0];\n\t\tconst x_plus = (x + 1 + this.env.size[0]) % this.env.size[0];\n\t\tif (!this.env.fields[state][inputFrame][x_plus][y]) {\n\t\t\tthis.env.fields[state][inputFrame][x_plus][y] = 0;\n\t\t}\n\t\tif (!this.env.fields[state][inputFrame][x_minus][y]) {\n\t\t\tthis.env.fields[state][inputFrame][x_minus][y] = 0;\n\t\t}\n\t\tthis.env.fieldsDx[state][outputFrame][x][y][0] =\n\t\t\t(this.env.fields[state][inputFrame][x_plus][y] -\n\t\t\t\tthis.env.fields[state][inputFrame][x_minus][y]) /\n\t\t\t2;\n\n\t\t// Y derivative\n\t\tconst y_minus = (y - 1 + this.env.size[1]) % this.env.size[1];\n\t\tconst y_plus = (y + 1 + this.env.size[1]) % this.env.size[1];\n\t\tif (!this.env.fields[state][inputFrame][x][y_plus]) {\n\t\t\tthis.env.fields[state][inputFrame][x][y_plus] = 0;\n\t\t}\n\t\tif (!this.env.fields[state][inputFrame][x][y_minus]) {\n\t\t\tthis.env.fields[state][inputFrame][x][y_minus] = 0;\n\t\t}\n\t\tthis.env.fieldsDx[state][outputFrame][x][y][1] =\n\t\t\t(this.env.fields[state][inputFrame][x][y_plus] -\n\t\t\t\tthis.env.fields[state][inputFrame][x][y_minus]) /\n\t\t\t2;\n\t};\n\n\tthis.env.apply(computePointDx);\n};\n\nexport default Euler;\n","import Euler from \"./Euler\";\n\nfunction Engine(env, walkers, engine = \"euler\", database, analysis) {\n\tthis.running = false;\n\tthis.env = env;\n\tthis.walkers = walkers;\n\tthis.engine = engine.toLowerCase();\n\tthis.database = database;\n\tthis.analysis = analysis;\n\tthis.setup();\n\tthis.counter = 0;\n}\n\nEngine.prototype.restart = function () {\n\tthis.env.clear();\n\tthis.walkers.reset();\n\tthis.counter = 0;\n};\n\nEngine.prototype.setup = function () {\n\tswitch (this.engine) {\n\t\tcase \"euler\":\n\t\t\tthis.engine = new Euler(this.env, this.walkers);\n\t\t\tbreak;\n\t\t// case \"rk\":\n\t\t// case \"rungekutta\":\n\t\t// this.engine = RungeKutta;\n\t\tdefault:\n\t\t\tconsole.log(\"No engine was selected...\");\n\t}\n};\n\nEngine.prototype.next = function () {\n\tif (!this.running) return;\n\tthis.env.init();\n\tthis.counter++;\n\tthis.engine.run();\n\tthis.saveMetrics();\n\tthis.env.reset();\n\tthis.walkers.resetDr();\n};\n\nEngine.prototype.toggle = function () {\n\tthis.running = !this.running;\n};\n\nEngine.prototype.stop = function () {\n\tthis.running = false;\n};\n\nEngine.prototype.saveMetrics = function () {\n\tconst saveStepSize = (walker) => {\n\t\tconst stepSize = Math.sqrt(walker.dr[0][0] ** 2 + walker.dr[0][1] ** 2);\n\t\tthis.database.save(\"stepSize\", stepSize);\n\t};\n\t// this.walkers.apply(saveStepSize);\n};\n\nexport default Engine;\n","import { copy } from \"../../utils/tools\";\nimport generateField from \"../../utils/generateField\";\n\nfunction BurningTree(matrix, campfires) {\n\tthis.rows = matrix.length;\n\tthis.cols = matrix[0].length;\n\tthis.forest = matrix;\n\tthis.campfires = campfires;\n\tthis.maxPathLength = 50;\n\tthis.A = null;\n\tthis.edges = [];\n\n\treturn this.connect();\n}\n\nBurningTree.prototype.connect = function () {\n\tthis.A = this.campfires.map((campfire) => this.burnForest(campfire));\n\treturn this.A;\n};\n\nBurningTree.prototype.burnForest = function (campfire) {\n\t// Returns adjacency matrix\n\tconst { name, state, coord } = campfire;\n\n\tlet forest = copy(this.forest);\n\n\tlet stack = [[...coord, -1]];\n\n\twhile (stack.length && stack[0][2] < this.maxPathLength) {\n\t\tthis.explore(forest, stack);\n\t}\n\n\treturn this.campfires.map((camp) => {\n\t\tconst [xtar, ytar] = camp.coord;\n\t\tconst filtered = this.getNeighbors(xtar, ytar, 1).filter(([x, y]) => {\n\t\t\treturn forest[x][y] > 1 && camp.name != campfire.name;\n\t\t});\n\n\t\treturn filtered.length ? 1 : 0;\n\t});\n};\n\nBurningTree.prototype.explore = function (forest, stack) {\n\tconst [x, y, step] = stack.shift();\n\n\tif (forest[x][y] == 0) {\n\t\tif (step !== -1) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tforest[x][y] = step;\n\n\tif (this.checkCampfire([x, y])) {\n\t\tif (step !== -1 && step !== 2) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (step == -1) {\n\t\tconst neighbors = this.getNeighbors(x, y, 1);\n\t\tneighbors.forEach((neighbor) => {\n\t\t\tconst [x, y] = neighbor;\n\t\t\tif (forest[x][y] == 1) {\n\t\t\t\tstack.push([x, y, 2]);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tconst neighbors = this.getNeighbors(x, y);\n\t\tneighbors.forEach((neighbor) => {\n\t\t\tconst [x, y] = neighbor;\n\t\t\tif (forest[x][y] == 1) {\n\t\t\t\tstack.push([x, y, step + 1]);\n\t\t\t}\n\t\t});\n\t}\n};\n\nBurningTree.prototype.checkCampfire = function (coord) {\n\treturn this.campfires.filter((campfire) => {\n\t\tthis.getNeighbors(campfire.coord, 1).filter((neighbor) => {\n\t\t\treturn neighbor[0] == coord[0] && neighbor[1] == coord[1];\n\t\t});\n\t\tconst condition =\n\t\t\tcampfire.coord[0] - 1 <= coord[0] &&\n\t\t\tcoord[0] <= campfire.coord[0] + 1 &&\n\t\t\tcampfire.coord[1] - 1 <= coord[1] &&\n\t\t\tcampfire.coord[1] + 1 >= coord[1];\n\t\treturn condition;\n\t}).length;\n};\n\nBurningTree.prototype.getNeighbors = function (x, y, diag = 0) {\n\t// diag : 1 , returns diag\n\n\tconst up = (y - 1 + this.cols) % this.cols;\n\tconst left = (x - 1 + this.rows) % this.rows;\n\tconst right = (x + 1 + this.rows) % this.rows;\n\tconst down = (y + 1 + this.cols) % this.cols;\n\n\tconst diags = [\n\t\t[left, up],\n\t\t[left, down],\n\t\t[right, up],\n\t\t[right, down],\n\t];\n\n\tif (diag) return [[x, down], [x, up], [left, y], [right, y], ...diags];\n\treturn [\n\t\t[x, down],\n\t\t[x, up],\n\t\t[left, y],\n\t\t[right, y],\n\t];\n};\n\nfunction download(filename, text) {\n\tvar element = document.createElement(\"a\");\n\telement.setAttribute(\n\t\t\"href\",\n\t\t\"data:text/plain;charset=utf-8,\" + encodeURIComponent(text)\n\t);\n\telement.setAttribute(\"download\", filename);\n\telement.style.display = \"none\";\n\tdocument.body.appendChild(element);\n\telement.click();\n\tdocument.body.removeChild(element);\n}\n\nexport default BurningTree;\n","import generateField from \"../utils/generateField\";\nimport HoshenKopelman from \"./algorithms/HoshenKopelman\";\nimport BurningTree from \"./algorithms/BurningTree\";\n\nfunction Connectivity(env, nodes, database) {\n\tthis.nodes = nodes;\n\tthis.env = env;\n\tthis.connectivityThreshold = env.s0 * 2;\n\tthis.database = database;\n\tthis.adjencyMatrix = null;\n\tthis.hoshenKopelman = null;\n\tthis.reset();\n}\n\nConnectivity.prototype.filterUsingThreshold = function (combinedField) {\n\tfor (let i = 0; i < this.env.size[0]; i++) {\n\t\tfor (let j = 0; j < this.env.size[1]; j++) {\n\t\t\tthis.filteredField[i][j] =\n\t\t\t\tcombinedField[i][j] > this.connectivityThreshold ? 1 : 0;\n\t\t}\n\t}\n};\n\nConnectivity.prototype.reset = function () {\n\tthis.filteredField = generateField(this.env.size, 0);\n};\n\nConnectivity.prototype.run = function (combinedField, { time, version }) {\n\tthis.reset();\n\t// printM(combinedField);\n\tthis.filterUsingThreshold(combinedField);\n\t// this.hoshenKopelman = HoshenKopelman(this.filteredField);\n\n\tconst burningTree = new BurningTree(this.filteredField, this.nodes.list);\n\n\tconst nbrEdges = burningTree\n\t\t.map((row) => row.reduce((a, b) => a + b, 0))\n\t\t.reduce((a, b) => a + b, 0);\n\n\tthis.database.push(\"connectivity\", {\n\t\ttime,\n\t\tA: burningTree,\n\t\tversion,\n\t\tE: nbrEdges / 2,\n\t});\n\n\treturn { time, y: nbrEdges / 2 };\n};\n\nfunction printM(matrix) {\n\tlet count = 0;\n\tconsole.log(\"- - - -  - - - \");\n\tmatrix.forEach((row) => {\n\t\tcount++;\n\t\tconsole.log(\n\t\t\t...row.slice(10, 20).map((el) => Math.round(el)),\n\t\t\t\"/    \",\n\t\t\tcount\n\t\t);\n\t});\n\tconsole.log(\"- - - -  - - - \");\n}\n\nexport default Connectivity;\n","import generateField from \"../utils/generateField\";\nimport Connectivity from \"./Connectivity\";\nimport { uuid } from \"../utils/tools\";\n\nfunction Analysis(env, walkers, nodes, database, events = []) {\n\tthis.env = env;\n\tthis.walkers = walkers;\n\tthis.database = database;\n\tthis.nodes = nodes;\n\tthis.version = uuid();\n\tthis.sessions = [this.version];\n\tthis.combinedField = generateField(this.env.size, 0);\n\tthis.maxima = {\n\t\tmax: 1,\n\t\tmin: 0,\n\t};\n\tthis.maxMinThreshold = 1000;\n\tthis.interval = 10;\n\tthis.events = [];\n\n\tthis.displayOptions = {\n\t\tshowWalkers: false,\n\t\tshowNodes: true,\n\t\tshowCombinedFields: true,\n\t\tshowPositiveField: false,\n\t\tshowNegativeField: false,\n\t\tdefaultColor: \"#ffffff\",\n\t\tpositiveColor: \"#f6ff33\",\n\t\tnegativeColor: \"#33fff0\",\n\t\tcombinedColor: \"#6a0dad\",\n\t};\n\n\t// this.plot = new Plot(document.getElementById(\"canvas-plot\"), {\n\t// \tname: \"plot\"\n\t// });\n\n\tthis.fineGrain = 1;\n\n\tthis.connectivity = new Connectivity(env, nodes, database);\n}\n\nAnalysis.prototype.combineFields = function () {\n\tlet combinedField = generateField(this.env.size, 0);\n\tfor (var i = 0; i < this.env.size[0]; i++) {\n\t\tfor (let j = 0; j < this.env.size[1]; j++) {\n\t\t\tcombinedField[i][j] =\n\t\t\t\tthis.env.fields.positive[0][i][j] + this.env.fields.negative[0][i][j];\n\t\t}\n\t}\n\n\tthis.combinedField = combinedField;\n};\n\nAnalysis.prototype.computeMaxima = function () {\n\tthis.maxima.min = Math.min(...this.combinedField.flat());\n\tthis.maxima.max = Math.max(...this.combinedField.flat());\n\tthis.maxima.max =\n\t\tthis.maxima.max < this.maxMinThreshold\n\t\t\t? this.maxMinThreshold\n\t\t\t: this.maxima.max;\n};\nAnalysis.prototype.run = function () {\n\tthis.combineFields();\n\tthis.computeMaxima();\n\tthis.checkEvents();\n};\n\nAnalysis.prototype.checkEvents = function () {\n\tif (this.env.timeSinceStart % this.interval === 0) {\n\t\tthis.edge();\n\t}\n\tthis.events.forEach((event) => {\n\t\tif (this.env.timeSinceStart === event.t) {\n\t\t\tthis.applyEvent(event);\n\t\t}\n\t});\n};\n\nAnalysis.prototype.applyEvent = function (event) {\n\tswitch (event.type) {\n\t\tcase \"node\":\n\t\t\tthis.nodes.toggle(event);\n\t\t\tbreak;\n\t\tcase \"parameter\":\n\t\t\tthis.env[event.name] = +event.value;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n};\n\nAnalysis.prototype.edge = function () {\n\tthis.connectivity.run(this.combinedField, {\n\t\ttime: this.env.timeSinceStart,\n\t\tversion: this.version,\n\t});\n};\n\nAnalysis.prototype.clear = function () {\n\tthis.version = uuid();\n\tthis.sessions.push(this.version);\n\tthis.combinedField = generateField(this.env.size, 0);\n};\n\nexport default Analysis;\n","function Database(name, callback) {\n\tthis.name = name;\n\tthis.callback = callback || function () {};\n}\n\nDatabase.prototype.push = function (name, value) {\n\t// adds the value the end of the array of name\n\tif (this[name] === undefined) {\n\t\tthis[name] = [];\n\t}\n\tthis.callback({ name, value });\n\tthis[name].push(value);\n};\n\nDatabase.prototype.save = function (name, value) {\n\tif (this[\"_\" + name] === undefined) {\n\t\tthis[\"_\" + name] = {};\n\t}\n\tconst round = Math.round(value);\n\tif (round in this[\"_\" + name]) {\n\t\tthis[\"_\" + name][round]++;\n\t} else {\n\t\tthis[\"_\" + name][round] = 1;\n\t}\n};\n\nexport default Database;\n","function Loop(id, callback, defaultCallback, setId) {\n\tthis.minInt = 0; //30fps\n\tthis.maxFrames = 10000;\n\tthis.id = id;\n\tthis.frame = -1;\n\tthis.callback = callback;\n\tthis.defaultCallback = defaultCallback;\n\tthis.start = this.start.bind(this);\n\tthis.step = this.step.bind(this);\n\tthis.request = (func) => {\n\t\tsetId(window.requestAnimationFrame(func));\n\t};\n}\n\nLoop.prototype.start = function () {\n\tthis.startTime = performance.now();\n\tthis.request(this.step);\n};\n\nLoop.prototype.step = function () {\n\t// if (this.frame >= this.maxFrames - 1) return;\n\tif (performance.now() - this.startTime > this.minInt) {\n\t\tthis.frame++;\n\t\tthis.callback({ id: this.id, frame: this.frame });\n\t\tthis.startTime = performance.now();\n\t} else {\n\t\tthis.defaultCallback();\n\t}\n\tthis.request(this.step);\n};\n\nLoop.prototype.slowMo = function (state) {\n\tthis.minInt = state ? 400 : 0;\n};\n\nexport default Loop;\n","import Loop from \"../animation/Loop\";\n\nfunction Controller({ walkers, analysis, engine, env, nodes, worker = false }) {\n\tthis.walkers = walkers;\n\tthis.analysis = analysis;\n\tthis.engine = engine;\n\tthis.nodes = nodes;\n\tthis.env = env;\n\tthis.loop = undefined;\n\tthis.loopCallback = undefined;\n\tthis.slowMo = false;\n\tthis.worker = worker;\n\n\t// Keeps track of updates\n\tthis.updates = {\n\t\tui: 0,\n\t\tgame: 0,\n\t\tback: 0,\n\t};\n\tthis.setRequestId = this.setRequestId.bind(this);\n\tthis.useCallback = this.useCallback.bind(this);\n\tthis.useRedraw = this.useRedraw.bind(this);\n\tthis.toggleEngine = this.toggleEngine.bind(this);\n\tthis.setContrast = this.setContrast.bind(this);\n\tthis.setParams = this.setParams.bind(this);\n\tthis.setLayout = this.setLayout.bind(this);\n}\n\n///////////////////////////////////////////////////////////////\n//  INTERFACE SETTINGS GETTERS AND SETTERS   \t\t\t  /////\n///////////////////////////////////////////////////////////////\n\n/**\n * Gets the variables of the environment\n */\nController.prototype.getEnv = function (obj) {\n\tconst { size, alpha, beta, k, epsilon, s0 } = this.env;\n\tconst { numberOfAgents } = this.walkers;\n\treturn JSON.parse(\n\t\tJSON.stringify({ size, numberOfAgents, alpha, beta, k, epsilon, s0 })\n\t);\n};\n\n/**\n * Sets the variables of the environment\n */\n\nController.prototype.setEnv = function (\n\t{ size, numberOfAgents, alpha, beta, k, epsilon, s0 },\n\trestart\n) {\n\tthis.env.alpha = +alpha;\n\tthis.env.beta = +beta;\n\tthis.env.k = +k;\n\tthis.env.epsilon = +epsilon;\n\tthis.env.s0 = +s0;\n\tthis.walkers.setPopulation(+numberOfAgents);\n\tif (restart) {\n\t\tthis.env.size = size;\n\t\tthis.engine.restart();\n\t}\n};\n\n/**\n * Gets the variables of the layers\n */\nController.prototype.getLayers = function () {\n\tconst {\n\t\tshowWalkers,\n\t\tshowNodes,\n\t\tshowCombinedFields,\n\t\tshowPositiveField,\n\t\tshowNegativeField,\n\t\tpositiveColor,\n\t\tnegativeColor,\n\t\tdefaultColor,\n\t\tcombinedColor,\n\t} = this.analysis.displayOptions;\n\n\treturn {\n\t\tshowWalkers,\n\t\tshowNodes,\n\t\tshowCombinedFields,\n\t\tshowPositiveField,\n\t\tshowNegativeField,\n\t\tpositiveColor,\n\t\tnegativeColor,\n\t\tdefaultColor,\n\t\tcombinedColor,\n\t\tslowMo: copy(this.slowMo),\n\t};\n};\n\n/**\n * Sets the variables of the layers\n */\nController.prototype.setLayers = function (name, value) {\n\tswitch (name) {\n\t\tcase \"slowMo\":\n\t\t\tthis.useSlowMo(value);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.analysis.displayOptions[name] = value;\n\t\t\treturn;\n\t}\n};\n\n/**\n * Sets the contrast of the layers\n */\nController.prototype.setContrast = function (contrast) {\n\tthis.analysis.fineGrain = contrast;\n};\n\n/**\n * Sets the events for the analysis\n */\n\n/**\n * Sets the variables for the layout\n */\nController.prototype.setLayout = function (\n\tnodes,\n\tsize,\n\tparams = [],\n\tevents = [],\n\tkey\n) {\n\tthis.nodes.list = nodes;\n\tthis.nodes.layoutId = key;\n\tthis.env.makeNodesCenter();\n\tthis.setParams(params);\n\tthis.setEvents(events);\n\tif (this.env.size[0] !== size[0] || this.env.size[1] !== size[1]) {\n\t\tthis.env.size = size;\n\t\tthis.engine.restart();\n\t\tthis.analysis.clear();\n\t}\n\tthis.useRedraw();\n};\n\nController.prototype.setDefaultParams = function () {\n\tif (this.worker) {\n\t\treturn;\n\t}\n\tthis.useSlowMo(false);\n\tthis.analysis.displayOptions[\"showWalkers\"] = false;\n};\n\n/**\n * Sets the params for the layout\n */\nController.prototype.setParams = function (params) {\n\tthis.setDefaultParams();\n\tif (!Array.isArray(params)) {\n\t\treturn;\n\t}\n\tparams.forEach((param) => {\n\t\tswitch (param.name) {\n\t\t\tcase \"numberOfAgents\":\n\t\t\t\tthis.walkers.setPopulation(+param.value);\n\t\t\t\tbreak;\n\t\t\tcase \"showWalkers\":\n\t\t\tcase \"showCombinedField\":\n\t\t\tcase \"showPositiveField\":\n\t\t\tcase \"showNegativeField\":\n\t\t\t\tthis.analysis.displayOptions[param.name] = param.value;\n\t\t\t\tbreak;\n\t\t\tcase \"slowMo\":\n\t\t\t\tthis.useSlowMo(+param.value);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t});\n};\n\n/**\n * Sets the events\n */\n\nController.prototype.setEvents = function (events) {\n\tthis.analysis.events = events;\n};\n\n///////////////////////////////////////////////////////////////\n//  STAGE LOOP CONTROLLER\t\t \t\t\t\t          /////\n///////////////////////////////////////////////////////////////\n\n/**\n * Sets the id of the frame that is requested for animation\n * @param  {Number} id Identifier of the frame\n */\nController.prototype.setRequestId = function (id) {\n\tthis.reqId = id;\n};\n\n/**\n * Use the loop callback\n */\nController.prototype.useCallback = function (data) {\n\tthis.loopCallback(data);\n};\n/**\n * Use the redraw callback\n */\nController.prototype.useRedraw = function () {\n\tif (this.redraw) {\n\t\tthis.redraw();\n\t}\n};\n/**\n * Sets the id of the frame that is requested for animation\n * @param  {Number} id Identifier of the frame\n */\nController.prototype.setRequestId = function (id) {\n\tthis.reqId = id;\n};\n\n/**\n * Sets up the loop in the controller\n * @param  {String} id Identifier of the loop\n * @param  {Function} callback Function that is executed at every frame\n */\nController.prototype.setupLoop = function (id, callback) {\n\tthis.loopCallback = callback;\n\tif (this.loop instanceof Loop) return;\n\tthis.loop = new Loop(id, this.useCallback, this.useRedraw, this.setRequestId);\n};\n\n/**\n * Sets up the loop in the controller\n * @param  {Function} redraw Redraw the native stage\n */\nController.prototype.setupRedraw = function (callback) {\n\tthis.redraw = callback;\n};\n\n/**\n * Stops the loop\n */\nController.prototype.stopLoop = function () {\n\tif (this.loop instanceof Loop) {\n\t\twindow.cancelAnimationFrame(this.reqId);\n\t\tthis.reqId = undefined;\n\t}\n};\n\n/**\n * Starts the loop\n */\nController.prototype.startLoop = function () {\n\tif (this.loop instanceof Loop && this.reqId === undefined) {\n\t\tthis.loop.start();\n\t}\n};\n\nController.prototype.useSlowMo = function (state = undefined) {\n\tif (state === undefined) {\n\t\tthis.slowMo = !this.slowMo;\n\t} else {\n\t\tthis.slowMo = state;\n\t}\n\tthis.stopLoop();\n\tthis.loop.slowMo(this.slowMo);\n\tthis.startLoop();\n};\n\n///////////////////////////////////////////////////////////////\n//  SIMULATION CONTROLLER \t\t\t \t\t\t\t      /////\n///////////////////////////////////////////////////////////////\n\n/**\n * Starts and stops the simulation engine\n */\nController.prototype.toggleEngine = function (state) {\n\tif (state === undefined) {\n\t\tthis.engine.running = !this.engine.running;\n\t} else {\n\t\tthis.engine.running = state;\n\t}\n};\n\n/**\n * Sets the population number\n * @param  {Number} population The first number\n */\nController.prototype.setPopulation = function (population) {\n\tthis.walkers.setPopulation(population);\n};\n\nexport default Controller;\n\nfunction copy(val) {\n\treturn JSON.parse(JSON.stringify(val));\n}\n","export const generateFig3 = () => {\n\tconst seq = [0, 1, 2, 3, 4];\n\n\tconst positive = seq\n\t\t.map(row => {\n\t\t\treturn seq.map(col => {\n\t\t\t\treturn [row * 20, col * 20];\n\t\t\t});\n\t\t})\n\t\t.flat();\n\n\tconst negative = seq\n\t\t.map(row => {\n\t\t\treturn seq.map(col => {\n\t\t\t\treturn [row * 20 + 10, col * 20 + 10];\n\t\t\t});\n\t\t})\n\t\t.flat();\n\n\treturn {\n\t\tlattice: \"square\",\n\t\tsize: [100, 100],\n\t\tnodesCenter: { positive, negative }\n\t};\n};\n","import React, { createContext } from \"react\";\nimport Environment from \"../logic/environment/Environment\";\nimport WalkingSquad from \"../logic/walkers/WalkingSquad\";\nimport Nodes from \"../logic/nodes/Nodes\";\nimport Engine from \"../logic/engine/Engine\";\nimport Analysis from \"../logic/analysis/Analysis\";\nimport Database from \"../logic/analysis/Database\";\nimport Controller from \"../logic/controller/Controller\";\n\nimport { generateFig3 } from \"../logic/playgrounds/fig3\";\nimport \"../logic/utils/prototypes\";\n\nexport const simulationContext = createContext();\n\nexport const SimulationContextProvider = ({ children }) => {\n\tconst nodes = new Nodes();\n\tnodes.default();\n\n\tconst envir = new Environment({\n\t\talpha: 1,\n\t\tk: 0.03,\n\t\tbeta: 0.2,\n\t\tepsilon: 0.5,\n\t\ts0: 10000,\n\t\tframerate: 1,\n\t\tlayout: {},\n\t\tnodes\n\t});\n\n\tconst walkers = new WalkingSquad(500, envir, \"rand\", \"rand\", 0);\n\tconst database = new Database(\"Walker Metrics\");\n\tconst analysis = new Analysis(envir, walkers, nodes, database);\n\tconst engine = new Engine(envir, walkers, \"euler\", database, analysis);\n\tconst controller = new Controller({\n\t\twalkers: walkers,\n\t\tanalysis: analysis,\n\t\tengine: engine,\n\t\tenv: envir,\n\t\tnodes\n\t});\n\n\treturn (\n\t\t<simulationContext.Provider value={{ controller }}>\n\t\t\t{children}\n\t\t</simulationContext.Provider>\n\t);\n};\n","import React, { createContext, useState } from \"react\";\n\nexport const statsContext = createContext();\n\nexport const StatsContextProvider = ({ children }) => {\n\tconst [stats, setStats] = useState({ counter: 0 });\n\n\tconst updateStats = controller => {\n\t\tsetStats({\n\t\t\tcounter: controller.engine.counter,\n\t\t\trunning: controller.engine.running,\n\t\t\tconnectivity: controller.analysis.database.connectivity,\n\t\t\tnumberOfAnts: controller.walkers.numberOfAgents\n\t\t});\n\t};\n\treturn (\n\t\t<statsContext.Provider value={{ stats, updateStats }}>\n\t\t\t{children}\n\t\t</statsContext.Provider>\n\t);\n};\n","import React, { useState, useContext } from \"react\";\nimport { simulationContext } from \"../Simulation/context/SimulationContext\";\nimport { statsContext } from \"../Simulation/context/StatsContext\";\nimport \"./ControlBar.css\";\nimport PlayIcon from \"./Icons/play.svg\";\nimport PauseIcon from \"./Icons/pause.svg\";\nimport RestartIcon from \"./Icons/refresh.svg\";\n\nconst ControlBar = ({ Link }) => {\n\tconst { controller } = useContext(simulationContext);\n\tconst { stats } = useContext(statsContext);\n\tconst togglePlay = () => {\n\t\tstats.running\n\t\t\t? controller.toggleEngine(false)\n\t\t\t: controller.toggleEngine(true);\n\t\tif (!stats.running) controller.startLoop();\n\t};\n\n\tconst clickRestart = () => {\n\t\tcontroller.engine.restart();\n\t\tcontroller.analysis.clear();\n\t};\n\n\tconst progressStyle = (el) => {\n\t\tconst stage = Math.floor(stats.counter / 500) % 2;\n\t\tif (el) {\n\t\t\treturn {\n\t\t\t\tbackgroundColor: stage ? \"#2196f3\" : \"#87caff\",\n\t\t\t\twidth: `${(stats.counter / 5) % 100}%`,\n\t\t\t};\n\t\t}\n\t\treturn { backgroundColor: stage ? \"#87caff\" : \"#2196f3\" };\n\t};\n\n\treturn (\n\t\t<div className=\"control-bar\">\n\t\t\t<img\n\t\t\t\tclassName=\"control-btn\"\n\t\t\t\talt={\"play\"}\n\t\t\t\tsrc={stats.running ? PauseIcon : PlayIcon}\n\t\t\t\twidth=\"15px\"\n\t\t\t\tonClick={togglePlay}\n\t\t\t></img>\n\t\t\t<Link className=\"progress-container\" style={progressStyle(0)} to=\"/\">\n\t\t\t\t<div className=\"progress-fill\" style={progressStyle(1)}></div>\n\t\t\t</Link>\n\t\t\t<img\n\t\t\t\tclassName=\"control-btn\"\n\t\t\t\talt={\"restart\"}\n\t\t\t\tsrc={RestartIcon}\n\t\t\t\twidth=\"15px\"\n\t\t\t\tonClick={clickRestart}\n\t\t\t></img>\n\t\t</div>\n\t);\n};\n\nexport default ControlBar;\n","import React from \"react\";\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\nimport \"./Header.css\";\nimport ControlBar from \"../ControlBar\";\n\nconst Header = () => {\n\treturn (\n\t\t<div className=\"header\">\n\t\t\t<div className=\"icon\">\n\t\t\t\t<span role=\"img\" aria-label=\"Antwork\">\n\t\t\t\t\t\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<nav>\n\t\t\t\t<div>\n\t\t\t\t\t<Link className=\"page\" to=\"/\">\n\t\t\t\t\t\tHome\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Link className=\"page\" to=\"/about\">\n\t\t\t\t\t\tAbout\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t\t<div className=\"control-container\">\n\t\t\t\t<ControlBar Link={Link}></ControlBar>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Header;\n","import React from \"react\";\nimport GitHubButton from \"react-github-btn\";\n\nconst TotalMetrics = () => {\n\treturn (\n\t\t<div className=\"total-metrics\">\n\t\t\t<div className=\"ant-metric\">\n\t\t\t\t<div className=\"ant-text\">by Jordi Campos</div>\n\t\t\t</div>\n\t\t\t<div className=\"buttons\" style={{ marginTop: \".7rem\" }}>\n\t\t\t\t<GitHubButton\n\t\t\t\t\thref=\"https://github.com/c-jordi/Antwork\"\n\t\t\t\t\tdata-icon=\"octicon-star\"\n\t\t\t\t\taria-label=\"Star c-jordi/Antwork on GitHub\"\n\t\t\t\t>\n\t\t\t\t\tStar\n\t\t\t\t</GitHubButton>\n\t\t\t\t<GitHubButton\n\t\t\t\t\thref=\"https://github.com/c-jordi\"\n\t\t\t\t\taria-label=\"Follow @c-jordi on GitHub\"\n\t\t\t\t>\n\t\t\t\t\tFollow @c-jordi\n\t\t\t\t</GitHubButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default TotalMetrics;\n","import React from \"react\";\nimport TotalMetrics from \"./TotalMetrics\";\nimport \"./Title.css\";\n\nconst Title = () => {\n\treturn (\n\t\t<header className=\"App-header\">\n\t\t\t<h2>Antwork</h2>\n\t\t\t<p>\n\t\t\t\tWelcome to Antwork, a simulation tool for path forming of feromone\n\t\t\t\temitting brownian agents. The tool was developed during a semester\n\t\t\t\tproject.\n\t\t\t</p>\n\t\t\t<TotalMetrics></TotalMetrics>\n\t\t</header>\n\t);\n};\n\nexport default Title;\n","const layouts = [\n\t{\n\t\ttitle: \"Hello World\",\n\t\tsize: [10, 10],\n\t\tparams: [\n\t\t\t{ name: \"numberOfAgents\", value: 2 },\n\t\t\t{ name: \"slowMo\", value: true },\n\t\t\t{ name: \"showCombinedFields\", value: false },\n\t\t\t{ name: \"showPositiveField\", value: true },\n\t\t\t{ name: \"showNegativeField\", value: true },\n\t\t\t{ name: \"showWalkers\", value: true },\n\t\t],\n\t\tnodes: [\n\t\t\t{ name: \"node_1\", state: 1, coord: [2, 2] },\n\t\t\t{ name: \"node_2\", state: -1, coord: [2, 7] },\n\t\t\t{ name: \"node_3\", state: -1, coord: [7, 2] },\n\t\t\t{ name: \"node_4\", state: 1, coord: [7, 7] },\n\t\t],\n\t\tname: \"helloworld\",\n\t\tgroup: 1,\n\t},\n\t{\n\t\ttitle: \"Empty\",\n\t\tnodes: [],\n\t\tsize: [30, 30],\n\t\tparams: [],\n\t\tname: \"Empty30\",\n\t\tgroup: 1,\n\t},\n\t{\n\t\ttitle: \"Switch\",\n\t\tnodes: [\n\t\t\t{ name: \"node_1\", state: 1, coord: [15, 7] },\n\t\t\t{ name: \"node_2\", state: -1, coord: [15, 22] },\n\t\t],\n\t\tsize: [30, 30],\n\t\tparams: [{ name: \"numberOfAgents\", value: 450 }],\n\t\tname: \"Switch\",\n\t\tgroup: 1,\n\t},\n\t{\n\t\ttitle: \"ON/OFF Switch\",\n\t\tnodes: [\n\t\t\t{ name: \"node_1\", state: 1, coord: [15, 7] },\n\t\t\t{ name: \"node_2\", state: -1, coord: [15, 22] },\n\t\t],\n\t\tsize: [30, 30],\n\t\tevents: [\n\t\t\t{ type: \"parameter\", name: \"beta\", t: 1, value: 0.3 },\n\t\t\t{ type: \"parameter\", name: \"beta\", t: 1500, value: 1 },\n\t\t\t{ type: \"parameter\", name: \"beta\", t: 2500, value: 0.3 },\n\t\t],\n\t\tparams: [{ name: \"numberOfAgents\", value: 450 }],\n\t\tname: \"ON/OFFSwitch\",\n\t\tgroup: 1,\n\t},\n\t{\n\t\ttitle: \"Star\",\n\t\tnodes: [\n\t\t\t{ name: \"node_1\", state: 1, coord: [15, 15] },\n\t\t\t{ name: \"node_2\", state: -1, coord: [10, 15] },\n\t\t\t{ name: \"node_3\", state: -1, coord: [15, 10] },\n\t\t\t{ name: \"node_4\", state: -1, coord: [20, 15] },\n\t\t\t{ name: \"node_5\", state: -1, coord: [15, 20] },\n\t\t],\n\t\tsize: [30, 30],\n\t\tname: \"Star\",\n\t\tparams: [{ name: \"numberOfAgents\", value: 450 }],\n\t\tgroup: 1,\n\t},\n\t{\n\t\ttitle: \"Grid\",\n\t\tnodes: [0, 1, 2, 3, 4]\n\t\t\t.map((col) => {\n\t\t\t\treturn [0, 1, 2, 3, 4].map((row) => {\n\t\t\t\t\treturn [col * 20, row * 20];\n\t\t\t\t});\n\t\t\t})\n\t\t\t.flat()\n\t\t\t.map((coord, i) => {\n\t\t\t\treturn [\n\t\t\t\t\t{ name: \"node_p\" + i, state: 1, coord },\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"node_n\" + i,\n\t\t\t\t\t\tstate: -1,\n\t\t\t\t\t\tcoord: [coord[0] + 10, coord[1] + 10],\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t})\n\t\t\t.flat(),\n\t\tsize: [100, 100],\n\t\tparams: [{ name: \"numberOfAgents\", value: 450 }],\n\t\tname: \"Grid100\",\n\t\tgroup: 3,\n\t},\n\t{\n\t\ttitle: \"Empty\",\n\t\tnodes: [],\n\t\tsize: [90, 70],\n\t\tparams: [],\n\t\tname: \"Empty90x70\",\n\t\tgroup: 2,\n\t},\n\t{\n\t\ttitle: \"NAND GATE\",\n\t\tnodes: [\n\t\t\t{ name: \"node_1\", state: 1, coord: [28, 6] },\n\t\t\t{ name: \"node_2\", state: -1, coord: [30, 20] },\n\t\t\t{ name: \"node_3\", state: 1, coord: [45, 20] },\n\t\t\t{ name: \"node_4\", state: -1, coord: [60, 20] },\n\t\t\t{ name: \"node_5\", state: -1, coord: [10, 20] },\n\t\t\t{ name: \"node_6\", state: 1, coord: [20, 35] },\n\t\t\t{ name: \"node_8\", state: -1, coord: [20, 50] },\n\t\t\t{ name: \"node_9\", state: 1, coord: [10, 60] },\n\t\t\t{ name: \"node_10\", state: 1, coord: [35, 50] },\n\t\t\t{ name: \"node_11\", state: -1, coord: [50, 50] },\n\t\t\t{ name: \"node_12\", state: 1, coord: [65, 50] },\n\t\t\t{ name: \"node_13\", state: -1, coord: [37, 63] },\n\t\t\t{ name: \"node_14\", state: 1, coord: [50, 40] },\n\t\t\t{ name: \"node_15\", state: -1, coord: [65, 65] },\n\t\t],\n\t\tsize: [90, 70],\n\t\tparams: [{ name: \"numberOfAgents\", value: 3250 }],\n\t\tname: \"NAND\",\n\t\tgroup: 2,\n\t},\n\t{\n\t\ttitle: \"NOT GATE\",\n\t\tnodes: [\n\t\t\t{ name: \"node_1\", state: 1, coord: [28, 6] },\n\t\t\t{ name: \"node_2\", state: -1, coord: [30, 20] },\n\t\t\t{ name: \"node_3\", state: 1, coord: [45, 20] },\n\t\t\t{ name: \"node_4\", state: -1, coord: [60, 20] },\n\t\t\t{ name: \"node_5\", state: -1, coord: [10, 20] },\n\t\t\t{ name: \"node_6\", state: 1, coord: [20, 35] },\n\t\t\t{ name: \"pivot\", state: 1, coord: [20, 40] },\n\t\t\t{ name: \"node_8\", state: -1, coord: [20, 50] },\n\t\t\t{ name: \"node_9\", state: 1, coord: [10, 60] },\n\t\t\t{ name: \"node_10\", state: 1, coord: [35, 50] },\n\t\t\t{ name: \"node_11\", state: -1, coord: [50, 50] },\n\t\t\t{ name: \"node_12\", state: 1, coord: [65, 50] },\n\t\t\t{ name: \"node_13\", state: -1, coord: [37, 63] },\n\t\t\t{ name: \"node_14\", state: 1, coord: [50, 40] },\n\t\t\t{ name: \"node_15\", state: -1, coord: [65, 65] },\n\t\t],\n\t\tsize: [90, 70],\n\t\tparams: [{ name: \"numberOfAgents\", value: 3250 }],\n\t\tname: \"NOT\",\n\t\tgroup: 2,\n\t},\n\t{\n\t\ttitle: \"NOT/NAND GATE\",\n\t\tnodes: [\n\t\t\t{ name: \"node_1\", state: 1, coord: [28, 6] },\n\t\t\t{ name: \"node_2\", state: -1, coord: [30, 20] },\n\t\t\t{ name: \"node_3\", state: 1, coord: [45, 20] },\n\t\t\t{ name: \"node_4\", state: -1, coord: [60, 20] },\n\t\t\t{ name: \"node_5\", state: -1, coord: [10, 20] },\n\t\t\t{ name: \"node_6\", state: 1, coord: [20, 35] },\n\t\t\t{ name: \"node_7\", state: -1, coord: [20, 50] },\n\t\t\t{ name: \"node_8\", state: 1, coord: [10, 60] },\n\t\t\t{ name: \"node_9\", state: 1, coord: [35, 50] },\n\t\t\t{ name: \"node_10\", state: -1, coord: [50, 50] },\n\t\t\t{ name: \"node_11\", state: 1, coord: [65, 50] },\n\t\t\t{ name: \"node_12\", state: -1, coord: [37, 63] },\n\t\t\t{ name: \"node_13\", state: 1, coord: [50, 40] },\n\t\t\t{ name: \"node_14\", state: -1, coord: [65, 65] },\n\t\t\t{ name: \"pivot\", state: 1, coord: [20, 40] },\n\t\t],\n\t\tsize: [90, 70],\n\t\tparams: [{ name: \"numberOfAgents\", value: 3250 }],\n\t\tevents: [\n\t\t\t{ type: \"parameter\", name: \"beta\", t: 1, value: 0.3 },\n\n\t\t\t{\n\t\t\t\ttype: \"node\",\n\t\t\t\tt: 1500,\n\t\t\t\tname: \"pivot\",\n\t\t\t\tstate: 1,\n\t\t\t\tcoord: [20, 40],\n\t\t\t},\n\t\t\t{ type: \"parameter\", name: \"beta\", t: 1500, value: 1 },\n\t\t\t{ type: \"parameter\", name: \"beta\", t: 1800, value: 0.3 },\n\t\t\t{\n\t\t\t\ttype: \"node\",\n\t\t\t\tt: 3000,\n\t\t\t\tname: \"pivot\",\n\t\t\t\tstate: 1,\n\t\t\t\tcoord: [25, 40],\n\t\t\t},\n\t\t\t{ type: \"parameter\", name: \"beta\", t: 3000, value: 1 },\n\t\t\t{ type: \"parameter\", name: \"beta\", t: 3300, value: 0.3 },\n\t\t],\n\t\tname: \"NOT/NAND\",\n\t\tgroup: 2,\n\t},\n];\n\nexport const customSwitch = (dist) => ({\n\tkey: \"Custom\",\n\tnodes: [\n\t\t{ name: \"node_1\", state: 1, coord: [15, 7] },\n\t\t{ name: \"node_2\", state: -1, coord: [15, 7 + +dist] },\n\t],\n\tsize: [30, 30],\n\tparams: [],\n});\n\nexport default layouts;\n\nconst backupNot = [\n\t{ name: \"node_1\", state: 1, coord: [30, 5] },\n\t{ name: \"node_2\", state: -1, coord: [30, 20] },\n\t{ name: \"node_3\", state: 1, coord: [45, 20] },\n\t{ name: \"node_4\", state: -1, coord: [60, 20] },\n\t{ name: \"node_5\", state: -1, coord: [10, 20] },\n\t{ name: \"node_6\", state: 1, coord: [20, 35] },\n\t{ name: \"node_8\", state: -1, coord: [35, 50] },\n\t{ name: \"node_9\", state: 1, coord: [25, 60] },\n\t{ name: \"node_10\", state: 1, coord: [50, 50] },\n\t{ name: \"node_11\", state: -1, coord: [65, 50] },\n\t{ name: \"node_12\", state: 1, coord: [80, 50] },\n\t{ name: \"node_13\", state: -1, coord: [50, 65] },\n\t{ name: \"node_14\", state: 1, coord: [65, 40] },\n\t{ name: \"node_15\", state: -1, coord: [80, 65] },\n\t{ name: \"pivot\", state: 1, coord: [25, 40] },\n];\n","import React, { useContext, useRef, useEffect } from \"react\";\nimport { simulationContext } from \"../../Simulation/context/SimulationContext\";\nimport { withRouter } from \"react-router-dom\";\n\nimport layouts from \"../../layout\";\nimport { drawNodes } from \"./draw\";\nimport \"./Preview.css\";\n\nconst Preview = (props) => {\n\tconst { params } = props;\n\tconst { controller } = useContext(simulationContext);\n\tconst imgRef = useRef();\n\tconst preset = layouts.find((preset) => preset.name === params.name);\n\n\tconst handleClick = () => {\n\t\tcontroller.setLayout(\n\t\t\tpreset.nodes,\n\t\t\tpreset.size,\n\t\t\tpreset.params,\n\t\t\tpreset.events,\n\t\t\tpreset.name\n\t\t);\n\t\tconsole.log(props.history);\n\t\tprops.history.push(\"../\");\n\t};\n\n\tuseEffect(() => {\n\t\tdrawNodes(imgRef.current, preset.nodes, preset.size);\n\t});\n\n\treturn (\n\t\t<div className=\"preview-container\" onClick={handleClick}>\n\t\t\t<div className=\"preview\" id={\"preview\" + params.id}>\n\t\t\t\t<div className=\"preview-img\">\n\t\t\t\t\t<canvas height={100} width={100} ref={imgRef}></canvas>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"preview-text\">\n\t\t\t\t\t<div className=\"p-title\">\n\t\t\t\t\t\t<span className=\"p-label\">Title:</span> {params.title}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"p-body\">\n\t\t\t\t\t\t<span className=\"p-label\">Desc:</span> {params.text}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"subtitle\">Click above to run the simulation...</div>\n\t\t</div>\n\t);\n};\n\nexport default withRouter(Preview);\n","export function drawNodes(canvas, nodes, size) {\n\tconst ctx = canvas.getContext(\"2d\");\n\tconst width = canvas.width;\n\tconst height = canvas.height;\n\tconst xscale = width / size[0];\n\tconst yscale = height / size[1];\n\tconst scale = xscale < yscale ? xscale : yscale;\n\tconst xoffset = Math.round(width - xscale * size[0]);\n\tconst yoffset = Math.round(height - yscale * size[1]);\n\n\tnodes.forEach(({ state, coord }) => {\n\t\tctx.fillStyle = state === 1 ? \"rgb(246, 255, 51)\" : \"rgb(51, 255, 240)\";\n\t\tctx.fillRect(\n\t\t\tMath.round(coord[0] * scale - scale) + xoffset,\n\t\t\tMath.round(coord[1] * scale - scale) + yoffset,\n\t\t\tMath.ceil(scale * 3),\n\t\t\tMath.ceil(scale * 3)\n\t\t);\n\t});\n}\n","import React from \"react\";\n\nconst Header = () => {\n\treturn (\n\t\t<section className=\"doc-header\">\n\t\t\tUnder the supervision of: Prof. Frank Schweitzer and Dr. Giacomo Vaccario\n\t\t</section>\n\t);\n};\n\nexport default Header;\n","import React from \"react\";\n\nconst Introduction = () => {\n\treturn (\n\t\t<section className=\"introduction\">\n\t\t\t<h1 class=\"code-line\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\tIntroduction\n\t\t\t</h1>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"1\" data-line-end=\"2\"></p>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\tThe goal of this semester project is to provide a first attempt at\n\t\t\t\tconnecting two research domains in the hope of performing computation on\n\t\t\t\tself assembling networks[1]. In this project, the networks will be\n\t\t\t\tgenerated with the use of Active Brownian Agents[2]. The dynamics of\n\t\t\t\tthese brownian agents will lead to the generation of networks of trails\n\t\t\t\tbetween predefined nodes. To perform computation, this agent based\n\t\t\t\tmodelling framework will then be combined with an Active matter logic\n\t\t\t\tmodel[3] developped by Woodhouse and Dunkel.\n\t\t\t</p>\n\t\t</section>\n\t);\n};\n\nexport default Introduction;\n","import React from \"react\";\nimport MathJax from \"react-mathjax\";\n\nexport const Formula = (tex) => {\n\treturn <MathJax.Node formula={tex}></MathJax.Node>;\n};\n\nexport const IFormula = (tex) => {\n\treturn <MathJax.Node inline formula={tex}></MathJax.Node>;\n};\n","import React from \"react\";\nimport { Formula, IFormula } from \"./Formula\";\nimport Preview from \"../Preview\";\nimport Fig1 from \"../Ressources/fig1.svg\";\nimport Fig2 from \"../Ressources/fig2.svg\";\n\nconst NetworkGeneration = () => {\n\treturn (\n\t\t<section className=\"network-generation\">\n\t\t\t<h1 className=\"code-line\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\tNetwork Generation\n\t\t\t</h1>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\tThe network generation is performed by Brownian Agents that are capable\n\t\t\t\tof locally modifying and responding to an information field. In the case\n\t\t\t\tof a chemical field, the formation of trails is made possible by the\n\t\t\t\tinterplay of two processes:\n\t\t\t</p>\n\t\t\t<ol>\n\t\t\t\t<li className=\"has-line-data\" data-line-start=\"1\" data-line-end=\"2\">\n\t\t\t\t\tThe generation of gradients in the chemical field through localized\n\t\t\t\t\tdepositing of the agents\n\t\t\t\t</li>\n\t\t\t\t<li className=\"has-line-data\" data-line-start=\"2\" data-line-end=\"3\">\n\t\t\t\t\tThe nonlinear response of the agents to the chemical gradients\n\t\t\t\t\t(chemotaxis)\n\t\t\t\t</li>\n\t\t\t</ol>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"5\" data-line-end=\"6\">\n\t\t\t\tEach browniant agent i is characterized by the following state\n\t\t\t\tvariables: its position {IFormula(\"r_i\")}, its velocity{\" \"}\n\t\t\t\t{IFormula(\"v_i\")} and an internal parameters {IFormula(\"\\\\theta_i\")} and{\" \"}\n\t\t\t\t{IFormula(\"e_i\")}. The internal parameter {IFormula(\"\\\\theta_i\")} is\n\t\t\t\takin to a polarity and can assume one of three values: {IFormula(\"-1\")},\n\t\t\t\t{IFormula(\"0\")} or {IFormula(\"1\")}. The parameter {IFormula(\"e_i\")} is\n\t\t\t\tthe internal energy depot and powers the internal and external state\n\t\t\t\tchanges.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p className=\"has-line-data\" data-line-start=\"6\" data-line-end=\"7\">\n\t\t\t\t\t<img src={Fig1} style={{ width: \"100%\" }} alt=\"Fig1\" />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"8\" data-line-end=\"9\">\n\t\t\t\tOver the course of time, these state variable evolve deterministically\n\t\t\t\tand stochastically under the influence of the environment and other\n\t\t\t\tbrownian agents.\n\t\t\t</p>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"10\" data-line-end=\"11\">\n\t\t\t\tThe change of position of the brownian agents is described by an\n\t\t\t\toverdamped Langevin Equation.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p\n\t\t\t\t\tclassName=\"has-line-data\"\n\t\t\t\t\tdata-line-start=\"12\"\n\t\t\t\t\tdata-line-end=\"13\"\n\t\t\t\t\tstyle={{ fontSize: \"min(3vw,15px)\" }}\n\t\t\t\t>\n\t\t\t\t\t{Formula(\n\t\t\t\t\t\t\"\\\\frac{dr_i}{dt} = \\\\alpha_i \\\\frac{\\\\partial h^e(r,t)}{\\\\partial r}|_{r_i,\\\\theta_i} + \\\\sqrt{2 \\\\epsilon_i} \\\\xi_i(t)\"\n\t\t\t\t\t)}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"14\" data-line-end=\"15\">\n\t\t\t\tThe first term corresponds to the contribution of the gradient of the\n\t\t\t\teffective field {IFormula(\"h^e\")}, weighted by {IFormula(\"\\\\alpha_i\")},\n\t\t\t\tthe strength of the individual response to the strength of the field.\n\t\t\t\tThe parameter {IFormula(\"\\\\alpha_i\")} can either be positive for an\n\t\t\t\tattractive response or negative for a responsive response to the field.\n\t\t\t\tThe second term contains the effect of noise on the motion of the agent.\n\t\t\t\tThe noise {IFormula(\"\\\\xi_i(t)\")} is fully stochastic and is weighted by{\" \"}\n\t\t\t\t{IFormula(\"\\\\epsilon_i\")}, which is the inverse of the individual\n\t\t\t\tsensitivity {IFormula(\"w_i \\\\propto \\\\frac{1}{\\\\epsilon}\")}\n\t\t\t\tof the agent.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p className=\"has-line-data\" data-line-start=\"16\" data-line-end=\"17\">\n\t\t\t\t\t<img src={Fig2} style={{ width: \"100%\" }} alt=\"Fig2\" />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\tIn addition to the dynamical parameters, the parameter{\" \"}\n\t\t\t\t{IFormula(\"\\\\theta_i\\\\in{{-1,0,1}}\")} can evolve over time. For every\n\t\t\t\tagent, it initially assumes the value {IFormula(\"\\\\theta(t_0)=0\")}. When\n\t\t\t\tan agent comes in contact with a node, the agent will assume the\n\t\t\t\tpolarity of the node.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p\n\t\t\t\t\tclass=\"has-line-data\"\n\t\t\t\t\tdata-line-start=\"2\"\n\t\t\t\t\tdata-line-end=\"3\"\n\t\t\t\t\tstyle={{ fontSize: \"min(3vw,15px)\" }}\n\t\t\t\t>\n\t\t\t\t\t{Formula(\n\t\t\t\t\t\t\"\\\\Delta\\\\theta_i(t) = \\\\int_A \\\\sum\\\\limits_{j=1}^z (V_j - \\\\theta_i) \\\\frac{1}{A}\\\\delta(r_j^z - r_i(t))dr\"\n\t\t\t\t\t)}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"4\" data-line-end=\"5\">\n\t\t\t\tThe agents move around in a 2d plane of size {IFormula(\"A\")} that\n\t\t\t\tcontains {IFormula(\"z\")} nodes of polarity {IFormula(\"V_j=\\\\pm1\")} with{\" \"}\n\t\t\t\t{IFormula(\"j=1,,z\")}. Furthermore, {IFormula(\"z_+\")} nodes have a\n\t\t\t\tpositive polarity of {IFormula(\"V_j=+1\")} and {IFormula(\"z_-=z-z_+\")}{\" \"}\n\t\t\t\thave a negative potential {IFormula(\"V_j=-1\")}. These nodes do not have\n\t\t\t\tlong range effects on the agents and only interact with them once in\n\t\t\t\tcontact.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"6\" data-line-end=\"7\">\n\t\t\t\t<Preview\n\t\t\t\t\tparams={{\n\t\t\t\t\t\ttitle: \"hello world\",\n\t\t\t\t\t\ttext: \"Slowed down simulation to understand the dynamics\",\n\t\t\t\t\t\tname: \"helloworld\",\n\t\t\t\t\t}}\n\t\t\t\t></Preview>\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"8\" data-line-end=\"9\">\n\t\t\t\tAgents that are in the active state (which have recently undergone a\n\t\t\t\tcollision with a node), are able to produce either a {IFormula(\"(+1)\")}{\" \"}\n\t\t\t\tor {IFormula(\"(-1)\")} chemical. An agent that has a positive internal\n\t\t\t\tpolarity {IFormula(\"\\\\theta_i=1\")} will be producing a positive\n\t\t\t\tchemical. An agent with a negative internal polarity{\" \"}\n\t\t\t\t{IFormula(\"\\\\theta_i=-1\")} will be producing a negative chemical. An\n\t\t\t\tagent with internal polarity {IFormula(\"\\\\theta_i=0\")} is not producing\n\t\t\t\tany chemical. The agents rate of chemical production{\" \"}\n\t\t\t\t{IFormula(\"s_i(\\\\theta_i,t)\")} depends on the time since his last\n\t\t\t\tcollision, the initial production rate and the decay in the production\n\t\t\t\trate.\n\t\t\t</p>\n\n\t\t\t<p\n\t\t\t\tclass=\"has-line-data\"\n\t\t\t\tdata-line-start=\"10\"\n\t\t\t\tdata-line-end=\"11\"\n\t\t\t\tstyle={{ fontSize: \"min(2vw,15px)\" }}\n\t\t\t>\n\t\t\t\t{Formula(\n\t\t\t\t\t\"s_i( \\\\theta_i,t) = \\\\frac{\\\\theta_i}{2} [ ( 1+\\\\theta_i)s_{+1}^0 exp(-\\\\beta_{+1}(t-t^i_{n+})) - (1-\\\\theta_i)s^0_{-1}exp(-\\\\beta_{-1}(t-t^i_{n-}))]\"\n\t\t\t\t)}\n\t\t\t</p>\n\n\t\t\t<p class=\"has-line-data\" data-line-start=\"12\" data-line-end=\"13\">\n\t\t\t\tThe initial production rates are given by {IFormula(\"s_{+1}^0\")} and{\" \"}\n\t\t\t\t{IFormula(\"s_{-1}^0\")} for agents with positive and negative polarities\n\t\t\t\trespectively. The exponential decay parameters in the production rate\n\t\t\t\tare given by {IFormula(\"\\\\beta_{+1}\")} and {IFormula(\"\\\\beta_{-1}\")}. In\n\t\t\t\tour implementation, the values of these parameters dont differ for\n\t\t\t\tpositive and negative chemicals.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"14\" data-line-end=\"15\">\n\t\t\t\tThe spatio-temporal distribution of the chemicals is decribed by the\n\t\t\t\tchemical field {IFormula(\"h_{\\\\theta}(r,t)\")} for{\" \"}\n\t\t\t\t{IFormula(\"\\\\theta = \\\\pm 1\")} given by:\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p\n\t\t\t\t\tclass=\"has-line-data\"\n\t\t\t\t\tdata-line-start=\"16\"\n\t\t\t\t\tdata-line-end=\"17\"\n\t\t\t\t\tstyle={{ fontSize: \"min(2.3vw,15px)\" }}\n\t\t\t\t>\n\t\t\t\t\t{Formula(\n\t\t\t\t\t\t\"\\\\frac{\\\\partial h_{\\\\theta}(r,t)}{\\\\partial t} = - k_{\\\\theta}h_{\\\\theta}(r,t) + \\\\sum\\\\limits_{i=1}^{N}s_i(\\\\theta_i,t)\\\\delta_{\\\\theta;\\\\theta_i}\\\\delta(r-r_i(t))\"\n\t\t\t\t\t)}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"18\" data-line-end=\"19\">\n\t\t\t\tThe first term relates to the exponential decay of the chemical\n\t\t\t\tconcentration through spontaneous decomposition. Its rate is given by{\" \"}\n\t\t\t\t{IFormula(\"k_{\\\\theta}\")}. The second term indicates that the agents\n\t\t\t\tonly contribute to the field of equal polarity by locally depositing a\n\t\t\t\tchemical concentration, that varies over time.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"20\" data-line-end=\"21\">\n\t\t\t\tThe effective field {IFormula(\"h^e(r,t)\")} is made from the combination\n\t\t\t\tof both fields in the following manner:\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p\n\t\t\t\t\tclass=\"has-line-data\"\n\t\t\t\t\tdata-line-start=\"21\"\n\t\t\t\t\tdata-line-end=\"22\"\n\t\t\t\t\tstyle={{ fontSize: \"min(2.5vw,15px)\" }}\n\t\t\t\t>\n\t\t\t\t\t{Formula(\n\t\t\t\t\t\t\"\\\\frac{\\\\partial h^{e}(r,t)}{\\\\partial r} = \\\\frac{\\\\theta_i}{2}[(1+\\\\theta_i)\\\\frac{\\\\partial h_{-1}(r,t)}{\\\\partial r} - (1-\\\\theta_i)\\\\frac{\\\\partial h_{+1}(r,t)}{\\\\partial r}]\"\n\t\t\t\t\t)}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"23\" data-line-end=\"24\">\n\t\t\t\tCombining everything, one can see that agents that are not active (ie{\" \"}\n\t\t\t\t{IFormula(\"\\\\theta=0\")}) do not interact with the chemical field. Active\n\t\t\t\tagents are propolled by the gradient field of the opposite polarity and\n\t\t\t\tdeposit chemicals in the field of same polarity.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"25\" data-line-end=\"27\">\n\t\t\t\tTo establish the network of trails, we sum the two individuals chemical\n\t\t\t\tfields and form a combined field {IFormula(\"\\\\hat{h}(r,t)\")}.<br />\n\t\t\t\tThe network of trails is observed by suming the two\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"27\" data-line-end=\"28\">\n\t\t\t\t\t{Formula(\"\\\\hat{h}(r,t) = h_{+1}(r,t) + h_{-1}(r,t)\")}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"29\" data-line-end=\"30\">\n\t\t\t\tFor two nodes to be connected, there must exist at least one path\n\t\t\t\tbetween the two nodes along which the value of the combined field is\n\t\t\t\tabove a imposed cutoff value {IFormula(\"h_{cut}\")}.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"31\" data-line-end=\"32\">\n\t\t\t\t\t{Formula(\"E_{kl}(t)=E_{lk}(t) = 1\")} at time {IFormula(\"t\")} if{\" \"}\n\t\t\t\t\t{IFormula(\"\\\\hat{h}(\\\\gamma,t)>h_{cut}\")} for {IFormula(\"\\\\gamma\")} a\n\t\t\t\t\tpath in {IFormula(\"A\")}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t</section>\n\t);\n};\n\nexport default NetworkGeneration;\n","import React, { useState, useRef } from \"react\";\n\nconst Images = ({ imageSrcs }) => {\n\tconst imgRef = useRef();\n\tconst [index, setIndex] = useState(0);\n\tconst totalImages = imageSrcs.length;\n\tfunction nextImage() {\n\t\tconst newIndex = (index + 1) % totalImages;\n\t\tsetIndex(newIndex);\n\t}\n\n\tconst setImage = () => {\n\t\treturn imageSrcs[index];\n\t};\n\n\tsetTimeout(nextImage, 3000);\n\n\treturn (\n\t\t<img\n\t\t\tref={imgRef}\n\t\t\tsrc={setImage()}\n\t\t\talt=\"switching images\"\n\t\t\tstyle={{ width: \"100%\" }}\n\t\t></img>\n\t);\n};\n\nexport default Images;\n","import React from \"react\";\nimport { Formula, IFormula } from \"./Formula\";\nimport Images from \"./Images\";\nimport Fig6 from \"../Ressources/fig6.svg\";\nimport Fig7 from \"../Ressources/fig7.svg\";\nimport Fig7a from \"../Ressources/fig7a.svg\";\nimport Fig7b from \"../Ressources/fig7b.svg\";\nimport Fig7c from \"../Ressources/fig7c.svg\";\nimport Fig7d from \"../Ressources/fig7d.svg\";\n\nconst ComputationalModel = () => {\n\treturn (\n\t\t<section className=\"computational-model\">\n\t\t\t<h1 className=\"code-line\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\tComputation on a network\n\t\t\t</h1>\n\t\t\t<h2 className=\"code-line\" data-line-start=\"2\" data-line-end=\"3\">\n\t\t\t\tThe model\n\t\t\t</h2>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"4\" data-line-end=\"5\">\n\t\t\t\tThe computation on the generated networks is provided by an Active\n\t\t\t\tMatter logic framework developped by Woodhouse and Dunkel. The logic\n\t\t\t\tresults from the combination of global incompressibility and local\n\t\t\t\tenergy constraints. Lets begin by quickly reviewing their framework.\n\t\t\t</p>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"6\" data-line-end=\"8\">\n\t\t\t\tThe model is defined on an oriented graph {IFormula(\"\\\\Gamma\")} made of\n\t\t\t\tvertices {IFormula(\"V\")} and edges {IFormula(\"E\")}. On the graph, every\n\t\t\t\tedge is assigned an arbitrary reference direction. The flow of each edge\n\t\t\t\tis given by {IFormula(\"\\\\phi_e \\\\in \\\\mathbb{R}\")}, where{\" \"}\n\t\t\t\t{IFormula(\"\\\\phi_e>0\")} and {IFormula(\"\\\\phi_e<0\")} correspond to a flow\n\t\t\t\tin and against the reference direction respectively. The flows on the\n\t\t\t\tgraph are given by the vector {IFormula(\"\\\\Phi = (\\\\phi_e)\")}. The\n\t\t\t\tmatrix {IFormula(\"D = (D_{ve})\")} is the signed incidence matrix of{\" \"}\n\t\t\t\t{IFormula(\"\\\\Gamma\")} so that {IFormula(\"D_{ve}\")} is {IFormula(\"+1\")}{\" \"}\n\t\t\t\tif {IFormula(\"e\")} enters {IFormula(\"v\")}, {IFormula(\"-1\")} if{\" \"}\n\t\t\t\t{IFormula(\"e\")} leaves {IFormula(\"v\")} and {IFormula(\"0\")} if{\" \"}\n\t\t\t\t{IFormula(\"e\")} is not incident to {IFormula(\"v\")}.<br />\n\t\t\t\tTo model the flow, they provide the following Hamiltonian:\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p\n\t\t\t\t\tclassName=\"has-line-data\"\n\t\t\t\t\tdata-line-start=\"9\"\n\t\t\t\t\tdata-line-end=\"10\"\n\t\t\t\t\tstyle={{ fontSize: \"min(3vw,15px)\" }}\n\t\t\t\t>\n\t\t\t\t\t{Formula(\n\t\t\t\t\t\t\"H_0=\\\\lambda \\\\sum\\\\limits_{e\\\\in E}( -\\\\frac{1}{4}\\\\phi^4_e+\\\\frac{1}{6}\\\\phi_e^6) +  \\\\frac{1}{2}\\\\mu \\\\sum\\\\limits_{v\\\\in V}(D \\\\cdot \\\\Phi)_v^2\"\n\t\t\t\t\t)}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"11\" data-line-end=\"12\">\n\t\t\t\tThe first sum contains the unidirectional flow condition. To minimize\n\t\t\t\tthe sum, flow values of the edges tend to{\" \"}\n\t\t\t\t{IFormula(\"\\\\phi_e \\\\rightarrow \\\\pm 1\")} or {IFormula(\"0\")}. The second\n\t\t\t\tsum imposes the soft incompressibility constraint such that the net flex{\" \"}\n\t\t\t\t{IFormula(\"(D\\\\cdot \\\\Phi)_v\")} at each vertex approaches{\" \"}\n\t\t\t\t{IFormula(\"0\")}.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p className=\"has-line-data\" data-line-start=\"13\" data-line-end=\"14\">\n\t\t\t\t\t<img style={{ width: \"100%\" }} src={Fig6} alt=\"Fig6\" />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"15\" data-line-end=\"16\">\n\t\t\t\tThe model can be expanded to implement inputs and outputs by allowing a\n\t\t\t\tnon zero flux on certain vertices, while maintaining the general\n\t\t\t\tincompressibility condition on the rest of the graph. This is done by\n\t\t\t\tdefining a new set of boundary vertices with a degree of 1 belonging to{\" \"}\n\t\t\t\t{IFormula(\"\\\\partial\\\\Gamma\")}. The set{\" \"}\n\t\t\t\t{IFormula(\n\t\t\t\t\t\"\\\\partial\\\\Gamma =\\\\partial\\\\Gamma_{in} \\\\cup \\\\partial\\\\Gamma_{out}\"\n\t\t\t\t)}{\" \"}\n\t\t\t\tis made of the input and output vertices. Input vertices are constrained\n\t\t\t\tto have a net outward flux of their binary input {IFormula(\"I_v\")} and\n\t\t\t\toutput vertices are unconstrained. This is achieved by adding the\n\t\t\t\thamiltonian {IFormula(\"H_{\\\\partial\\\\Gamma}\")} to the total hamiltionan.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p className=\"has-line-data\" data-line-start=\"17\" data-line-end=\"18\">\n\t\t\t\t\t{Formula(\n\t\t\t\t\t\t\"H_{\\\\partial\\\\Gamma} = \\\\frac{1}{2} \\\\mu\\\\sum\\\\limits_{v \\\\in \\\\partial\\\\Gamma_{in}} [(D\\\\cdot\\\\Phi)_v+I_v]^2\"\n\t\t\t\t\t)}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"19\" data-line-end=\"21\">\n\t\t\t\tAs one can see, the hamiltonian will attempt to equalize for each input\n\t\t\t\tvertex the terms {IFormula(\"(D\\\\cdot\\\\Phi)_v \\\\approx I_v\")}.<br />\n\t\t\t\tOne last feature of the model are the inclusion of diode edges{\" \"}\n\t\t\t\t{IFormula(\"E_{+}\\\\subset E\")} that only allow the flow to occur in a\n\t\t\t\tgiven direction. If the flow is negative {IFormula(\"\\\\phi_e < 0\")}, a\n\t\t\t\tdiode energy {IFormula(\"H_{+} = \\\\infty\")} is added to the total\n\t\t\t\thamiltonian. The total hamiltonian is given by:\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p className=\"has-line-data\" data-line-start=\"22\" data-line-end=\"23\">\n\t\t\t\t\t{Formula(\"H= H_0 + H_{\\\\partial \\\\Gamma} + H_{+}\")}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<h2 className=\"code-line\" data-line-start=\"25\" data-line-end=\"26\">\n\t\t\t\tThe gates\n\t\t\t</h2>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"26\" data-line-end=\"27\">\n\t\t\t\tUsing the previous framework, Woodhouse and Dunkel were able to\n\t\t\t\tdetermine multiple graphs with input vertices that would display the\n\t\t\t\tbehaviour of simple computational gates such as: OR, AND,NOT and NAND.\n\t\t\t\tThe NOT and NAND gates are displayed below.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p className=\"has-line-data\" data-line-start=\"27\" data-line-end=\"28\">\n\t\t\t\t\t<Images imageSrcs={[Fig7, Fig7a, Fig7b, Fig7c, Fig7d]}></Images>\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p className=\"has-line-data\" data-line-start=\"29\" data-line-end=\"30\">\n\t\t\t\tIn this project, we will be attempting to recreate these two gates. The\n\t\t\t\tstructural similarity of these gates will be used to toggle between them\n\t\t\t\tthrough the activation or deactivation of a pivot node.\n\t\t\t</p>\n\t\t</section>\n\t);\n};\n\nexport default ComputationalModel;\n","import React from \"react\";\nimport { Formula, IFormula } from \"./Formula\";\nimport Fig3 from \"../Ressources/fig3.svg\";\nimport Fig4 from \"../Ressources/fig4.svg\";\nimport Fig5 from \"../Ressources/fig5.svg\";\n\nconst Implementation = () => {\n\treturn (\n\t\t<section className=\"implementation\">\n\t\t\t<h2 class=\"code-line\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\tImplementation\n\t\t\t</h2>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"1\" data-line-end=\"2\">\n\t\t\t\tThe model is implemented on 2d square lattice with periodic boundary\n\t\t\t\tconditions. Agents and nodes occupy a single cell on the lattice.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"3\" data-line-end=\"4\">\n\t\t\t\tAs mentioned previously, the coefficients for {IFormula(\"(+)\")} and{\" \"}\n\t\t\t\t{IFormula(\"(-)\")} chemicals are taken to be equal:\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"4\" data-line-end=\"5\">\n\t\t\t\t\t{IFormula(\"s^0_{+1}=s^0_{-1}=s_0\")},{\"  \"}\n\t\t\t\t\t{IFormula(\"k_{+1}=k_{-1}=k_h\")}, {\"  \"}\n\t\t\t\t\t{IFormula(\"\\\\beta_{+1}=\\\\beta_{-1}=\\\\beta\")}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"6\" data-line-end=\"7\">\n\t\t\t\tThe simulation is comprised of several steps that occur in the following\n\t\t\t\torder.\n\t\t\t</p>\n\t\t\t<ol>\n\t\t\t\t<li class=\"has-line-data\" data-line-start=\"8\" data-line-end=\"9\">\n\t\t\t\t\tAgents move according to the gradient of the field\n\t\t\t\t</li>\n\t\t\t\t<li class=\"has-line-data\" data-line-start=\"9\" data-line-end=\"10\">\n\t\t\t\t\tAgents emit in the chemical fields\n\t\t\t\t</li>\n\t\t\t\t<li class=\"has-line-data\" data-line-start=\"10\" data-line-end=\"12\">\n\t\t\t\t\tThe evolution of the chemical fields is computed\n\t\t\t\t</li>\n\t\t\t</ol>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"12\" data-line-end=\"13\">\n\t\t\t\t\t<img src={Fig3} alt=\"Fig3\" style={{ width: \"100%\" }} />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"15\" data-line-end=\"16\">\n\t\t\t\tThe movement of the agents is discretized and restricted to a single\n\t\t\t\tstep in four possible directions: up, down, left and right. The discrete\n\t\t\t\tsetting is necessary to compute the spatial gradients of the field. For\n\t\t\t\tevery cell containing an agent, the gradient of the fields is computed\n\t\t\t\tin the vertical and horizontal directions using Euler equations. The\n\t\t\t\tdiscretized nature of the setting did not require the use of more\n\t\t\t\tprecise or advanced methods such as Runge Kutta. For every agent i, the{\" \"}\n\t\t\t\t{IFormula(\"\\\\frac{dr_i}{dt}\")}vector is computed by adding the gradient\n\t\t\t\tof the field and a contribution from the noise. Then the scalar product\n\t\t\t\twith the four unit vectors: {IFormula(\"\\\\hat{e_x}\")},\n\t\t\t\t{IFormula(\"-\\\\hat{e_x}\")},{IFormula(\"\\\\hat{e_y}\")} and{\" \"}\n\t\t\t\t{IFormula(\"-\\\\hat{e_y}\")} is calculated.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"16\" data-line-end=\"17\">\n\t\t\t\t\t{IFormula(\"q_{ij} =  \\\\frac{dr_i}{dt} \\\\cdot \\\\hat{e_j}\")} with{\" \"}\n\t\t\t\t\t{IFormula(\n\t\t\t\t\t\t\"\\\\hat{e_j} \\\\in \\\\{ \\\\hat{e_x},-\\\\hat{e_x},\\\\hat{e_y} ,-\\\\hat{e_y}\\\\}\"\n\t\t\t\t\t)}\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"18\" data-line-end=\"19\">\n\t\t\t\tThe agent will then take a step along the vector with the largest scalar\n\t\t\t\tproduct or will randomly choose between two vectors with equal scalar\n\t\t\t\tproducts. The position of the agent will be compared to the position of\n\t\t\t\tthe nodes to determine if the internal polarity of the agent must\n\t\t\t\tchange.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"20\" data-line-end=\"21\">\n\t\t\t\tAfter all agents have taken their step, the emitted chemicals are\n\t\t\t\tcombined with the residue fields for both the positive and negative\n\t\t\t\tchemicals. The chemical fields for the next time step can be determined\n\t\t\t\tby adding the fields from the previous time step and their respective\n\t\t\t\ttemporal gradients.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"22\" data-line-end=\"23\">\n\t\t\t\tThe connectivity of the lattice is determined using an implementation of\n\t\t\t\ta Tree Burning algorithm.\n\t\t\t</p>\n\n\t\t\t<h3 class=\"code-line\" data-line-start=\"26\" data-line-end=\"27\">\n\t\t\t\tA couple caveats\n\t\t\t</h3>\n\t\t\t<ul>\n\t\t\t\t<li class=\"has-line-data\" data-line-start=\"28\" data-line-end=\"29\">\n\t\t\t\t\tThe size of the nodes and the total number of agents will impose an\n\t\t\t\t\timplicit limit of the number of trails that can enter or leave a\n\t\t\t\t\tsingle node.\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"29\" data-line-end=\"30\">\n\t\t\t\t\t<img src={Fig4} alt=\"Fig4\" style={{ width: \"100%\" }} />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<ul>\n\t\t\t\t<li class=\"has-line-data\" data-line-start=\"31\" data-line-end=\"33\">\n\t\t\t\t\tIn our implementation we opted for a square lattice where the movement\n\t\t\t\t\tis restricted to four directions: left,right,up and down. Other\n\t\t\t\t\tlattices could have been used which would have changed the speed of\n\t\t\t\t\tpropagation of the walkers in certain directions.\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"33\" data-line-end=\"34\">\n\t\t\t\t\t<img src={Fig5} alt=\"Fig5\" style={{ width: \"100%\" }} />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t</section>\n\t);\n};\n\nexport default Implementation;\n","import React from \"react\";\nimport Preview from \"../Preview\";\nimport { Formula, IFormula } from \"./Formula\";\nimport Fig8 from \"../Ressources/fig8.svg\";\nimport OnOffImg from \"../Ressources/onoff.png\";\nimport SwitchImg from \"../Ressources/switch.png\";\nimport DensityImg from \"../Ressources/density.png\";\nimport SwitchAImg from \"../Ressources/switchA.png\";\nimport SwitchBImg from \"../Ressources/switchB.png\";\n\nconst Analysis = () => {\n\treturn (\n\t\t<section className=\"doc-analysis\">\n\t\t\t<h1 class=\"code-line\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\tResults\n\t\t\t</h1>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"2\" data-line-end=\"3\">\n\t\t\t\tTo validate the implementation of the network formation agent based\n\t\t\t\tmodel, we begin by recreating a simple switch. Two nodes, positive and\n\t\t\t\tnegative, are placed on a 30 by 30 lattice.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"4\" data-line-end=\"5\">\n\t\t\t\t<Preview\n\t\t\t\t\tparams={{\n\t\t\t\t\t\ttitle: \"switch\",\n\t\t\t\t\t\ttext: \"Simple switch with 2 nodes\",\n\t\t\t\t\t\tname: \"Switch\",\n\t\t\t\t\t}}\n\t\t\t\t></Preview>\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"6\" data-line-end=\"7\">\n\t\t\t\tWe begin by measuring the mean connection time needed to connect two\n\t\t\t\tnodes at a distance L. These results are obtained by averaging 100\n\t\t\t\tsimulations for each length. The results are displayed below on a\n\t\t\t\tlogarithmic scale.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"8\" data-line-end=\"9\">\n\t\t\t\t\t<img src={SwitchImg} style={{ width: \"100%\" }} alt=\"Switch\" />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"10\" data-line-end=\"11\">\n\t\t\t\tAs we can see, when the distance increases, the connection time{\" \"}\n\t\t\t\t{IFormula(\"t_{con}\")} increases exponentially before diverging at a\n\t\t\t\tdistance of {IFormula(\"22\")}. The distance around which the connection\n\t\t\t\ttime diverges depends on the environment parameters and the density of\n\t\t\t\twalkers on the lattice ({IFormula(\"n=0.5\")}). This experiment can be\n\t\t\t\tused to define an approximate parameter and node separation limit for\n\t\t\t\twhich intricate structures with more nodes, sustaining several\n\t\t\t\tconnections, can be created.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"12\" data-line-end=\"13\">\n\t\t\t\tWe continue by measuring the connectivity of the switch over time as the\n\t\t\t\tvalue of the parameter {IFormula(\"\\\\beta\")} alternates between{\" \"}\n\t\t\t\t{IFormula(\"0.3\")} and {IFormula(\"0.9\")}. We display the average of the\n\t\t\t\tconnectivity after averaging over 400 samples.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"14\" data-line-end=\"15\">\n\t\t\t\t\t<img src={OnOffImg} style={{ width: \"100%\" }} alt=\"OnOff\" />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"16\" data-line-end=\"17\">\n\t\t\t\tAs one can see from the plot, when the parameter {IFormula(\"\\\\beta\")}{\" \"}\n\t\t\t\t(exponential decay in the emission) increases to 1, the connectivity of\n\t\t\t\tthe switch rapidly drops down to 0. The walkerss emission rates decay\n\t\t\t\ttoo rapidly to sustain a path between two nodes. However, the following\n\t\t\t\ttransient period (time during which the network establishes itself)\n\t\t\t\tmight be shorter if the time elapsed between two activations (\n\t\t\t\t{IFormula(\"\\\\beta =0.3\")}) is short enough. Traces of the previous paths\n\t\t\t\tremain in the chemical fields and walkers quickly reestablish these\n\t\t\t\troutes.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"18\" data-line-end=\"19\">\n\t\t\t\tWe now try to construct the NAND and NOT gates that we introduced\n\t\t\t\tpreviously. To do so, we begin by laying down a set of positive and\n\t\t\t\tnegatives nodes, such that the expected connection pattern will recreate\n\t\t\t\tthe gates. While doing so, it is important to keep in mind that nodes of\n\t\t\t\topposite polarity are more likely to be connected if they are close\n\t\t\t\ttogether. In addition, for a node to sustain multiple connections, we\n\t\t\t\tmust make sure that the edges are coming in contact with the node from\n\t\t\t\tdifferent angles.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"20\" data-line-end=\"21\">\n\t\t\t\t<Preview\n\t\t\t\t\tparams={{\n\t\t\t\t\t\ttitle: \"NAND gate\",\n\t\t\t\t\t\ttext: \"Implementation of the NAND gate\",\n\t\t\t\t\t\tname: \"NAND\",\n\t\t\t\t\t}}\n\t\t\t\t></Preview>\n\t\t\t\t<Preview\n\t\t\t\t\tparams={{\n\t\t\t\t\t\ttitle: \"NOT gate\",\n\t\t\t\t\t\ttext: \"Implementation of the NOT gate\",\n\t\t\t\t\t\tname: \"NOT\",\n\t\t\t\t\t}}\n\t\t\t\t></Preview>\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"22\" data-line-end=\"23\">\n\t\t\t\tWe were able to come up with two layouts, for the NAND and NOT gates\n\t\t\t\trespectively, that differed in a single node. The advantage being that\n\t\t\t\tby removing or adding that pivotal node, we can toggle between the two\n\t\t\t\tgates. To improve the placement of the nodes, we calculated the average\n\t\t\t\tconnectivity of the edges over 200 simulations with 3250 walkers for a\n\t\t\t\tlattice of size 90 by 70.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"24\" data-line-end=\"25\">\n\t\t\t\t\t<img src={Fig8} style={{ width: \"100%\" }} alt=\"Fig8\" />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"26\" data-line-end=\"27\">\n\t\t\t\tThe figure above shows the average connectivity for the NAND gate. As we\n\t\t\t\tcan see, an edge is missing between two nodes. Thus, the layout was\n\t\t\t\taltered to bring the two nodes closer to permit a connection. One could\n\t\t\t\timagine using the average edge connectivity combined with an algorithmic\n\t\t\t\toptimization procedure to dynamically position the nodes given a desired\n\t\t\t\tnetwork structure.\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"28\" data-line-end=\"29\">\n\t\t\t\tTo estimate the effect of the number of walkers on the network formation\n\t\t\t\tof the NAND gate, we measured the average connectivity as a function of\n\t\t\t\tthe number of walkers for a 90 by 70 lattice.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"29\" data-line-end=\"30\">\n\t\t\t\t\t<img src={DensityImg} style={{ width: \"100%\" }} alt=\"Density\" />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"31\" data-line-end=\"32\">\n\t\t\t\tWe see that for a density superior to {IFormula(\"n=0.5\")}, which amounts\n\t\t\t\tto around 3250 walkers, the average number of connections hardly\n\t\t\t\tincreases. One can therefore assume that the nodes, that are within\n\t\t\t\treach of eachother, are connected.\n\t\t\t</p>\n\n\t\t\t<p class=\"has-line-data\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\tWe conclude our analysis by looking at the switching behavior between\n\t\t\t\tthe NAND and the NOT gates. To do so, we initiated a simulation with the\n\t\t\t\tNOT gate layout (with pivot node on). After the first 1500 steps, we\n\t\t\t\tswitched the layout to a NAND Gate by removing the pivot node. After\n\t\t\t\t3000 steps, we reinstated the NOT gate. The results displayed below are\n\t\t\t\tthe average of 50 simulations.\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"2\" data-line-end=\"3\">\n\t\t\t\t\t<img src={SwitchAImg} style={{ width: \"100%\" }} alt=\"NANDSwitchA\" />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"4\" data-line-end=\"5\">\n\t\t\t\tShortly after the beginning of the simulation, the NOT gate is\n\t\t\t\tsuccessfully constructed. When the pivot node is turned off, the edge\n\t\t\t\tconnecting that node with the rest of the NOT gate layout quickly\n\t\t\t\tdisappears. This is shown by the slight drop in average connectivity.\n\t\t\t\tThe closest node in the NAND gate layout quickly takes over the\n\t\t\t\tconnection. The NAND gate is now active. However, when the pivot node is\n\t\t\t\tturned on again, the pivot node is not able to reinstate its previous\n\t\t\t\tconnection as his walkers have been hijacked by another trail. The\n\t\t\t\tsystem is stuck in the NAND gate state. To compensate for this, we\n\t\t\t\tdecided to use the decay rate {IFormula(\"\\\\beta\")} to reset the trails\n\t\t\t\tof our network.\n\t\t\t\t<Preview\n\t\t\t\t\tparams={{\n\t\t\t\t\t\ttitle: \"NOT & NAND\",\n\t\t\t\t\t\ttext: \"Toggling between two gates with reset\",\n\t\t\t\t\t\tname: \"NOT/NAND\",\n\t\t\t\t\t}}\n\t\t\t\t></Preview>\n\t\t\t</p>\n\t\t\t<blockquote>\n\t\t\t\t<p class=\"has-line-data\" data-line-start=\"5\" data-line-end=\"6\">\n\t\t\t\t\t<img src={SwitchBImg} style={{ width: \"100%\" }} alt=\"NANDSwitchB\" />\n\t\t\t\t</p>\n\t\t\t</blockquote>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"7\" data-line-end=\"8\">\n\t\t\t\tBy increasing {IFormula(\"\\\\beta\")} to 0.9 for a duration of 300 time\n\t\t\t\tsteps when toggling the pivot node, we managed to successfully regain\n\t\t\t\tthe NOT gate layout after the second transition.\n\t\t\t</p>\n\t\t</section>\n\t);\n};\n\nexport default Analysis;\n","import React from \"react\";\n\nconst Bibliography = () => {\n\treturn (\n\t\t<section className=\"docs-bibliography\">\n\t\t\t<h2>References</h2>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\t[1]: Computing with Neural Circuits: A Model, Hopfield\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"2\" data-line-end=\"3\">\n\t\t\t\t[2]: Self-assembling of networks in an agent-based model, Schweitzer\n\t\t\t\t&amp; Tilch\n\t\t\t</p>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"4\" data-line-end=\"5\">\n\t\t\t\t[3]: Active matter logic for autonomous microfluidics, Woodhouse &amp;\n\t\t\t\tDunkel\n\t\t\t</p>\n\t\t</section>\n\t);\n};\nexport default Bibliography;\n","import React from \"react\";\n\nconst Conclusion = () => {\n\treturn (\n\t\t<section className=\"docs-conclusion\">\n\t\t\t<h1 class=\"code-line\" data-line-start=\"0\" data-line-end=\"1\">\n\t\t\t\tConclusion\n\t\t\t</h1>\n\t\t\t<p class=\"has-line-data\" data-line-start=\"2\" data-line-end=\"3\">\n\t\t\t\tGiven a model for self-generating networks and a framework to perform\n\t\t\t\tcomputation on networks, we managed to build simple computational gates.\n\t\t\t\tIn addition, using the adaptive properties of our network, we\n\t\t\t\texperimented with toggling between multiple gates by altering the value\n\t\t\t\tof one or two environment parameters.\n\t\t\t</p>\n\t\t</section>\n\t);\n};\nexport default Conclusion;\n","import React from \"react\";\nimport Preview from \"./Preview\";\nimport \"./Documentation.css\";\nimport MathJax from \"react-mathjax\";\nimport Header from \"./Sections/Header\";\nimport Introduction from \"./Sections/Introduction\";\nimport NetworkGeneration from \"./Sections/NetworkGeneration\";\nimport ComputationalModel from \"./Sections/ComputationalModel\";\nimport Implementation from \"./Sections/Implementation\";\nimport Analysis from \"./Sections/Analysis\";\nimport Bibliography from \"./Sections/Bibliography\";\nimport Conclusion from \"./Sections/Conclusion\";\n\nconst Documentation = () => {\n\treturn (\n\t\t<div className=\"docs\">\n\t\t\t<MathJax.Provider>\n\t\t\t\t<Header></Header>\n\t\t\t\t<Introduction></Introduction>\n\t\t\t\t<ComputationalModel></ComputationalModel>\n\t\t\t\t<NetworkGeneration></NetworkGeneration>\n\t\t\t\t<Implementation></Implementation>\n\t\t\t\t<Analysis></Analysis>\n\t\t\t\t<Conclusion></Conclusion>\n\t\t\t\t<Bibliography></Bibliography>\n\t\t\t</MathJax.Provider>\n\t\t</div>\n\t);\n};\n\nexport default Documentation;\n","import React from \"react\";\nimport Title from \"./Title/Title.js\";\nimport { Tile, TileContainer, TileCreator } from \"./Tile/Tile.js\";\nimport Documentation from \"./Documentation\";\n\nconst About = () => {\n\treturn (\n\t\t<div className=\"home\">\n\t\t\t<Title></Title>\n\t\t\t<Documentation></Documentation>\n\t\t</div>\n\t);\n};\n\nexport default About;\n","import React from \"react\";\n\nexport const MenuContainer = ({ children, className }) => {\n\treturn <div className={\"menu-container \" + className}>{children}</div>;\n};\n\nexport const MenuItem = ({ text, icon, alt, menuClick, window, isActive }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={\"menu-item \" + (isActive(window) ? \"active\" : \"\")}\n\t\t\tonClick={() => menuClick(window)}\n\t\t>\n\t\t\t{text && <div>{text}</div>}\n\n\t\t\t{icon && <img alt={alt} src={icon} width=\"20px\"></img>}\n\t\t</div>\n\t);\n};\n","import React from \"react\";\nimport \"./Inputs.css\";\n\nexport const TextInput = ({ name, state, setState, label }) => {\n\tconst handleChange = ({ target: { value } }) => {\n\t\tsetState(value);\n\t};\n\treturn (\n\t\t<div className=\"input-container\">\n\t\t\t<div className=\"input-label\">{label}</div>\n\t\t\t<input\n\t\t\t\tclassName=\"text-input\"\n\t\t\t\tvalue={state}\n\t\t\t\tonChange={handleChange}\n\t\t\t></input>\n\t\t</div>\n\t);\n};\n\nexport const FloatInput = ({\n\tname,\n\tstate,\n\tsetState,\n\tlabel,\n\tmax,\n\tmin,\n\tplaceholder,\n\tmaxDigits = 6\n}) => {\n\tconst handleChange = ({ target: { value } }) => {\n\t\tif (value === \".\") {\n\t\t\tvalue = \"0.\";\n\t\t}\n\t\tif (value.length >= maxDigits) return;\n\t\tif (!isNaN(+value)) {\n\t\t\tif ((+value < max) & (+value >= min)) {\n\t\t\t\tsetState(value);\n\t\t\t}\n\t\t}\n\t};\n\treturn (\n\t\t<div className=\"input-container\">\n\t\t\t<div className=\"input-label\">{label}</div>\n\t\t\t<input\n\t\t\t\tclassName=\"number-input\"\n\t\t\t\tvalue={state ? state : \"\"}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tplaceholder={placeholder ? placeholder : \"0\"}\n\t\t\t></input>\n\t\t</div>\n\t);\n};\n\nexport const PairIntInput = ({\n\tname,\n\tstate,\n\tsetState,\n\tlabel,\n\tmax,\n\tmin,\n\tplaceholder\n}) => {\n\tconst handleChange = ind => ({ target: { value } }) => {\n\t\tlet stateCopy = state ? state : Array(2).fill(0);\n\t\tif (Number.isInteger(+value)) {\n\t\t\tif ((+value < max) & (+value >= min)) {\n\t\t\t\tstateCopy[ind] = +value;\n\t\t\t\tsetState(stateCopy);\n\t\t\t}\n\t\t}\n\t};\n\treturn (\n\t\t<div className=\"input-container\">\n\t\t\t<div className=\"input-label\">{label}</div>\n\t\t\t<div className=\"pair-input\">\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"number-input\"\n\t\t\t\t\tvalue={state ? state[0] : \"\"}\n\t\t\t\t\tonChange={handleChange(0)}\n\t\t\t\t\tplaceholder={placeholder ? placeholder[0] : \"0\"}\n\t\t\t\t></input>\n\t\t\t\t<span className=\"sep-input\">,</span>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"number-input\"\n\t\t\t\t\tvalue={state ? state[1] : \"\"}\n\t\t\t\t\tonChange={handleChange(1)}\n\t\t\t\t\tplaceholder={placeholder ? placeholder[1] : \"0\"}\n\t\t\t\t></input>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\nexport const IntInput = ({\n\tname,\n\tstate,\n\tsetState,\n\tlabel,\n\tmax,\n\tmin,\n\tplaceholder\n}) => {\n\tconst handleChange = ({ target: { value } }) => {\n\t\tif (Number.isInteger(+value)) {\n\t\t\tif ((+value < max) & (+value >= min)) {\n\t\t\t\tsetState(value);\n\t\t\t}\n\t\t}\n\t};\n\treturn (\n\t\t<div className=\"input-container\">\n\t\t\t<div className=\"input-label\">{label}</div>\n\t\t\t<input\n\t\t\t\tclassName=\"number-input\"\n\t\t\t\tvalue={state ? state : \"\"}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tplaceholder={placeholder ? placeholder : \"0\"}\n\t\t\t></input>\n\t\t</div>\n\t);\n};\n\nexport const SubmitButton = ({ label, onClick, active }) => {\n\treturn (\n\t\t<button\n\t\t\tonClick={onClick}\n\t\t\tclassName={\"submit-button\" + (active ? \"\" : \" inactive\")}\n\t\t>\n\t\t\t{label ? label : \"Save\"}\n\t\t</button>\n\t);\n};\n\nexport const ColorInput = ({ label, state, setState }) => {\n\tconst getColor = color => {\n\t\tconst s = new Option().style;\n\t\ts.color = color;\n\t\treturn s.color;\n\t};\n\tconst handleChange = ({ target: { value } }) => {\n\t\tvalue = \"#\" + value.split(\"#\").join(\"\");\n\t\tif (value.length >= 8) return;\n\t\tsetState(value);\n\t};\n\treturn (\n\t\t<div className=\"input-container\">\n\t\t\t<div className=\"input-label\">{label}</div>\n\t\t\t<input\n\t\t\t\tclassName=\"color-input\"\n\t\t\t\tvalue={state ? state : \"\"}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tplaceholder={\"#\"}\n\t\t\t\tstyle={{ backgroundColor: getColor(state) }}\n\t\t\t></input>\n\t\t</div>\n\t);\n};\n\nexport const Switch = ({ name, state, setState, label }) => {\n\tconst handleClick = () => {\n\t\tsetState(!state);\n\t};\n\treturn (\n\t\t<div className=\"input-container\">\n\t\t\t<div className=\"input-label\">{label}</div>\n\t\t\t<label className=\"switch\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tdefaultChecked={state ? state : false}\n\t\t\t\t\tonChange={handleClick}\n\t\t\t\t></input>\n\t\t\t\t<span className=\"slider round\"></span>\n\t\t\t</label>\n\t\t</div>\n\t);\n};\n\nfunction isFloat(mixedVar) {\n\treturn +mixedVar === mixedVar && (!isFinite(mixedVar) || !!(mixedVar % 1));\n}\n\nfunction isColor(strColor) {\n\tvar s = new Option().style;\n\ts.color = strColor;\n\treturn s.color === strColor;\n}\n\nfunction rgbToHex(rgb) {\n\tlet hex = Number(rgb).toString(16);\n\tif (hex.length < 2) {\n\t\thex = \"0\" + hex;\n\t}\n\treturn hex;\n}\n\nfunction fullColorHex(r, g, b) {\n\tconst red = rgbToHex(r);\n\tconst green = rgbToHex(g);\n\tconst blue = rgbToHex(b);\n\treturn red + green + blue;\n}\n\nfunction rgbToFullHex(string) {\n\tconst [r, g, b] = string\n\t\t.replace(\"rgba(\", \"\")\n\t\t.replace(\"rgb(\", \"\")\n\t\t.replace(\")\", \"\")\n\t\t.split(\",\");\n\treturn fullColorHex(r, g, b);\n}\n","import React, { useState } from \"react\";\nimport { Switch, SubmitButton, IntInput } from \"../Inputs\";\n\nconst Settings = () => {\n\tconst [settings, setSettings] = useState({ framesPerSecond: 30 });\n\tconst inputFor = name => ({\n\t\tname,\n\t\tstate: settings[name],\n\t\tsetState: value => setSettings({ ...settings, [name]: value })\n\t});\n\treturn (\n\t\t<div className=\"page settings\">\n\t\t\t<div className=\"title\">Settings</div>\n\t\t\t<div className=\"body\">\n\t\t\t\t<div className=\"subtitle\">Playback</div>\n\t\t\t\t<IntInput label={\"FPS\"} {...inputFor(\"framesPerSecond\")}></IntInput>\n\t\t\t\t<div className=\"subtitle\">Computation</div>\n\t\t\t\t<Switch\n\t\t\t\t\tlabel={\"Worker parallelization\"}\n\t\t\t\t\t{...inputFor(\"isWorkersActivated\")}\n\t\t\t\t></Switch>\n\t\t\t\t<Switch\n\t\t\t\t\tlabel={\"Run in the background\"}\n\t\t\t\t\t{...inputFor(\"backgroundRun\")}\n\t\t\t\t></Switch>\n\t\t\t\t<SubmitButton></SubmitButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Settings;\n","import React, { useState } from \"react\";\nimport { IntInput, PairIntInput, FloatInput, SubmitButton } from \"../Inputs\";\n\nconst Environment = ({ controller, closeMenu }) => {\n\tconst [state, setState] = useState(controller.getEnv());\n\tconst inputFor = (name, restart) => ({\n\t\tname,\n\t\tstate: state[name],\n\t\tsetState: value => {\n\t\t\tsetState({\n\t\t\t\t...state,\n\t\t\t\t[name]: value,\n\t\t\t\tmodified: true,\n\t\t\t\trestart: restart | state.restart\n\t\t\t});\n\t\t}\n\t});\n\tconst onSave = () => {\n\t\tcontroller.setEnv(state, state.restart);\n\t\tsetState({ ...state, modified: false, restart: undefined });\n\t\tcloseMenu();\n\t};\n\treturn (\n\t\t<div className=\"page environment\">\n\t\t\t<div className=\"title\">Environment</div>\n\t\t\t<div className=\"body\">\n\t\t\t\t<IntInput\n\t\t\t\t\tmax={10000}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tlabel={\"Agents\"}\n\t\t\t\t\t{...inputFor(\"numberOfAgents\")}\n\t\t\t\t></IntInput>\n\t\t\t\t<PairIntInput\n\t\t\t\t\tlabel={\"Size\"}\n\t\t\t\t\tmax={150}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tplaceholder={[60, 60]}\n\t\t\t\t\t{...inputFor(\"size\", true)}\n\t\t\t\t></PairIntInput>\n\t\t\t\t<div className=\"subtitle\">Additional parameters</div>\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t<FloatInput\n\t\t\t\t\t\t\tmax={2}\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tlabel={\"Alpha\"}\n\t\t\t\t\t\t\t{...inputFor(\"alpha\")}\n\t\t\t\t\t\t></FloatInput>\n\t\t\t\t\t\t<FloatInput\n\t\t\t\t\t\t\tmax={2}\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tlabel={\"Epsilon\"}\n\t\t\t\t\t\t\t{...inputFor(\"epsilon\")}\n\t\t\t\t\t\t></FloatInput>\n\t\t\t\t\t\t<IntInput\n\t\t\t\t\t\t\tmax={10000}\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tlabel={\"S0\"}\n\t\t\t\t\t\t\t{...inputFor(\"s0\")}\n\t\t\t\t\t\t></IntInput>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t<FloatInput\n\t\t\t\t\t\t\tmax={2}\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tlabel={\"Beta\"}\n\t\t\t\t\t\t\t{...inputFor(\"beta\")}\n\t\t\t\t\t\t></FloatInput>\n\t\t\t\t\t\t<FloatInput\n\t\t\t\t\t\t\tmax={2}\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tlabel={\"K\"}\n\t\t\t\t\t\t\t{...inputFor(\"k\")}\n\t\t\t\t\t\t></FloatInput>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{state.modified && (\n\t\t\t\t\t<SubmitButton\n\t\t\t\t\t\tlabel={state.restart ? \"Restart\" : \"Apply\"}\n\t\t\t\t\t\tonClick={onSave}\n\t\t\t\t\t></SubmitButton>\n\t\t\t\t)}\n\t\t\t\t<div className=\"subtitle\">Governing equations</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Environment;\n","import React, { useState } from \"react\";\nimport { Switch, ColorInput } from \"../Inputs\";\n\nconst Layers = ({ controller }) => {\n\tconst [state, setState] = useState(controller.getLayers());\n\tconst inputFor = (name) => ({\n\t\tname,\n\t\tstate: state[name],\n\t\tsetState: (value) => {\n\t\t\tconsole.log(\"Setting:\", name, value);\n\t\t\tcontroller.setLayers(name, value);\n\t\t\tsetState({ ...state, [name]: value });\n\t\t},\n\t});\n\treturn (\n\t\t<div className=\"page layers\">\n\t\t\t<div className=\"title\">Layers</div>\n\t\t\t<div className=\"body\">\n\t\t\t\t<Switch label={\"Walkers\"} {...inputFor(\"showWalkers\")}></Switch>\n\t\t\t\t<Switch label={\"Nodes\"} {...inputFor(\"showNodes\")}></Switch>\n\t\t\t\t<Switch\n\t\t\t\t\tlabel={\"Combined field\"}\n\t\t\t\t\t{...inputFor(\"showCombinedFields\")}\n\t\t\t\t></Switch>\n\t\t\t\t<Switch\n\t\t\t\t\tlabel={\"Positive field\"}\n\t\t\t\t\t{...inputFor(\"showPositiveField\")}\n\t\t\t\t></Switch>\n\t\t\t\t<Switch\n\t\t\t\t\tlabel={\"Negative field\"}\n\t\t\t\t\t{...inputFor(\"showNegativeField\")}\n\t\t\t\t></Switch>\n\n\t\t\t\t<div className=\"subtitle\">Colors</div>\n\t\t\t\t<ColorInput label={\"Agents\"} {...inputFor(\"defaultColor\")}></ColorInput>\n\t\t\t\t<ColorInput\n\t\t\t\t\tlabel={\"Combined\"}\n\t\t\t\t\t{...inputFor(\"combinedColor\")}\n\t\t\t\t></ColorInput>\n\t\t\t\t<ColorInput\n\t\t\t\t\tlabel={\"Positive\"}\n\t\t\t\t\t{...inputFor(\"positiveColor\")}\n\t\t\t\t></ColorInput>\n\t\t\t\t<ColorInput\n\t\t\t\t\tlabel={\"Negative\"}\n\t\t\t\t\t{...inputFor(\"negativeColor\")}\n\t\t\t\t></ColorInput>\n\t\t\t\t<div className=\"subtitle\">Options</div>\n\t\t\t\t<Switch label={\"Slow Motion\"} {...inputFor(\"slowMo\")}></Switch>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Layers;\n","import React, { useRef, useEffect, useContext } from \"react\";\nimport { simulationContext } from \"../../../../Simulation/context/SimulationContext\";\nimport { drawNodes } from \"./draw\";\nimport \"./Preset.css\";\n\nconst Preset = ({ title, nodes, size, params, events, closeMenu, name }) => {\n\tconst canvasRef = useRef();\n\tconst { controller } = useContext(simulationContext);\n\tconst onClick = () => {\n\t\tcontroller.setLayout(nodes, size, params, events, name);\n\t\tcloseMenu();\n\t};\n\n\tuseEffect(() => {\n\t\tdrawNodes(canvasRef.current, nodes, size);\n\t});\n\n\treturn (\n\t\t<div className=\"preset\">\n\t\t\t<div className=\"preset-size\">\n\t\t\t\t{size[0]}x{size[1]}\n\t\t\t</div>\n\t\t\t<div className=\"preset-preview\" onClick={onClick}>\n\t\t\t\t<canvas ref={canvasRef} height={80} width={70}></canvas>\n\t\t\t</div>\n\t\t\t<div className=\"preset-title\">{title}</div>\n\t\t</div>\n\t);\n};\n\nexport const PresetBox = ({ children }) => {\n\treturn <div className=\"preset-container\">{children}</div>;\n};\n\nexport default Preset;\n","export function drawNodes(canvas, nodes, size) {\n\tconst ctx = canvas.getContext(\"2d\");\n\tconst width = canvas.width;\n\tconst height = canvas.height;\n\tconst xscale = width / size[0];\n\tconst yscale = height / size[1];\n\tconst scale = xscale < yscale ? xscale : yscale;\n\tconst xoffset = Math.round(width - xscale * size[0]);\n\tconst yoffset = Math.round(height - yscale * size[1]);\n\n\tnodes.forEach(({ state, coord }) => {\n\t\tctx.fillStyle = state === 1 ? \"rgb(246, 255, 51)\" : \"rgb(51, 255, 240)\";\n\t\tctx.fillRect(\n\t\t\tMath.round(coord[0] * scale - scale) + xoffset,\n\t\t\tMath.round(coord[1] * scale - scale) + yoffset,\n\t\t\tMath.ceil(scale * 3),\n\t\t\tMath.ceil(scale * 3)\n\t\t);\n\t});\n}\n","import React from \"react\";\nimport Preset, { PresetBox } from \"./Preset\";\nimport layouts from \"../../../layout.js\";\n\nconst Layout = ({ closeMenu }) => {\n\tconst generateLayout = () => {\n\t\tconst maxGroup = Math.max(...layouts.map(({ group }) => group)) + 1;\n\t\tconst groups = new Array(maxGroup).fill(0).map(() => []);\n\t\tlayouts.forEach((layout) => {\n\t\t\tgroups[layout.group].push(layout);\n\t\t});\n\n\t\tconst createPreset = (layout) => {\n\t\t\treturn <Preset {...layout} closeMenu={closeMenu} key={layout.name} />;\n\t\t};\n\n\t\tconst layout = groups.map((group) => {\n\t\t\treturn <PresetBox>{group.map(createPreset)}</PresetBox>;\n\t\t});\n\n\t\treturn layout;\n\t};\n\n\treturn (\n\t\t<div className=\"page layout\">\n\t\t\t<div className=\"title\">Layout</div>\n\t\t\t<div className=\"body\">{generateLayout()}</div>\n\t\t</div>\n\t);\n};\nexport default Layout;\n","function DrawFunc(controller, width, height) {\n\tthis.controller = controller;\n\tthis.isSetup = false;\n\tthis.uiCtx = null;\n\tthis.gameCtx = null;\n\tthis.backCtx = null;\n\tthis.scale = null;\n\tthis.offsetX = null;\n\tthis.offsetY = null;\n\tthis.width = width;\n\tthis.height = height;\n\tthis.versions = {\n\t\tui: -1,\n\t\tgame: -1,\n\t\tback: -1,\n\t};\n\tthis.draw = this.draw.bind(this);\n}\n\n/////\n// ATOMIC FUNCTIONS\n/////\n\nDrawFunc.prototype.setup = function ({ game, ui, back }) {\n\tif (this.isSetup) return;\n\tthis.uiCtx = ui.getContext(\"2d\");\n\tthis.gameCtx = game.getContext(\"2d\");\n\tthis.backCtx = back.getContext(\"2d\");\n\tthis.uiCtx.canvas.width = this.width;\n\tthis.uiCtx.canvas.height = this.height;\n\tthis.gameCtx.canvas.width = this.width;\n\tthis.gameCtx.canvas.height = this.height;\n\tthis.backCtx.canvas.width = this.width;\n\tthis.backCtx.canvas.height = this.height;\n\tthis.isSetup = true;\n\tthis.adjustScale();\n\tthis.drawNodes();\n};\n\nDrawFunc.prototype.adjustScale = function () {\n\tconst [x, y] = this.controller.env.size;\n\tconst scalex = this.width / x;\n\tconst scaley = this.height / y;\n\tthis.scale = scalex < scaley ? scalex : scaley;\n\tthis.offsetX = Math.floor((this.width - x * this.scale) / 2);\n\tthis.offsetY = Math.floor((this.height - y * this.scale) / 2);\n};\n\nDrawFunc.prototype.fill = function (ctx, color) {\n\tctx.strokeColor = color;\n\tctx.fillStyle = color;\n\tctx.fillRect(\n\t\tthis.offsetX,\n\t\tthis.offsetY,\n\t\tthis.width * this.scale,\n\t\tthis.height * this.scale\n\t);\n};\n\nDrawFunc.prototype.point = function (ctx, color, coord) {\n\tctx.strokeStyle = color;\n\tctx.fillStyle = color;\n\tctx.fillRect(\n\t\tMath.round(coord[0] * this.scale) + this.offsetX,\n\t\tMath.round(coord[1] * this.scale) + this.offsetY,\n\t\tMath.round(this.scale),\n\t\tMath.round(this.scale)\n\t);\n};\n\n////\n// COMPONENT FUNCTIONS\n////\n\nDrawFunc.prototype.drawWalkers = function () {\n\tconst drawWalker = (walker) => {\n\t\tconst [latx, laty] = this.controller.env.setPosition(walker.x, walker.y);\n\t\tthis.point(\n\t\t\tthis.gameCtx,\n\t\t\tthis.controller.analysis.displayOptions.defaultColor,\n\t\t\t[latx, laty]\n\t\t);\n\t};\n\tthis.controller.walkers.apply(drawWalker);\n};\n\nDrawFunc.prototype.drawNodes = function () {\n\t// if (this.controller.updates.back === this.versions.back) return;\n\t// this.versions.back = this.controller.updates.back;\n\tconst { positive, negative } = this.controller.env.nodesCenter;\n\tconst [x, y] = this.controller.env.size;\n\tpositive\n\t\t.filter((coord) => coord[0] <= x + 1 && coord[1] <= y + 1)\n\t\t.forEach((coord) => {\n\t\t\tthis.point(\n\t\t\t\tthis.uiCtx,\n\t\t\t\tthis.controller.analysis.displayOptions.positiveColor,\n\t\t\t\tcoord\n\t\t\t);\n\t\t});\n\tnegative\n\t\t.filter((coord) => coord[0] <= x + 1 && coord[1] <= y + 1)\n\t\t.forEach((coord) => {\n\t\t\tthis.point(\n\t\t\t\tthis.uiCtx,\n\t\t\t\tthis.controller.analysis.displayOptions.negativeColor,\n\t\t\t\tcoord\n\t\t\t);\n\t\t});\n\tthis.controller.updates.back = false;\n};\n\nDrawFunc.prototype.drawCombinedFields = function () {\n\tfor (let x = 0; x < this.controller.analysis.combinedField.length; x++) {\n\t\tfor (let y = 0; y < this.controller.analysis.combinedField[x].length; y++) {\n\t\t\tconst fieldStrength = this.controller.analysis.combinedField[x][y];\n\t\t\tconst fieldColor = `rgba(${hexToRGB(\n\t\t\t\tthis.controller.analysis.displayOptions.combinedColor\n\t\t\t)},${transform(\n\t\t\t\tfieldStrength,\n\t\t\t\tthis.controller.analysis.maxima,\n\t\t\t\tthis.controller.analysis.fineGrain\n\t\t\t)})`;\n\t\t\tthis.point(this.gameCtx, fieldColor, [x, y]);\n\t\t}\n\t}\n};\n\nDrawFunc.prototype.drawPositiveField = function () {\n\tfor (let x = 0; x < this.controller.env.fields.positive[0].length; x++) {\n\t\tfor (let y = 0; y < this.controller.env.fields.positive[0][x].length; y++) {\n\t\t\tconst fieldStrength = this.controller.env.fields.positive[0][x][y];\n\t\t\tconst fieldColor = `rgba(${hexToRGB(\n\t\t\t\tthis.controller.analysis.displayOptions.positiveColor\n\t\t\t)},${transform(\n\t\t\t\tfieldStrength,\n\t\t\t\tthis.controller.analysis.maxima,\n\t\t\t\tthis.controller.analysis.fineGrain\n\t\t\t)})`;\n\t\t\tthis.point(this.gameCtx, fieldColor, [x, y]);\n\t\t}\n\t}\n};\n\nDrawFunc.prototype.drawNegativeField = function () {\n\tfor (let x = 0; x < this.controller.env.fields.negative[0].length; x++) {\n\t\tfor (let y = 0; y < this.controller.env.fields.negative[0][x].length; y++) {\n\t\t\tconst fieldStrength = this.controller.env.fields.negative[0][x][y];\n\t\t\tconst fieldColor = `rgba(${hexToRGB(\n\t\t\t\tthis.controller.analysis.displayOptions.negativeColor\n\t\t\t)},${transform(\n\t\t\t\tfieldStrength,\n\t\t\t\tthis.controller.analysis.maxima,\n\t\t\t\tthis.controller.analysis.fineGrain\n\t\t\t)})`;\n\t\t\tthis.point(this.gameCtx, fieldColor, [x, y]);\n\t\t}\n\t}\n};\n\nDrawFunc.prototype.clearAll = function () {\n\tthis.uiCtx.clearRect(0, 0, this.width, this.height);\n\tthis.gameCtx.clearRect(0, 0, this.width, this.height);\n\tthis.backCtx.clearRect(0, 0, this.width, this.height);\n};\n\n////\n// HIGHLEVEL FUNCTIONS\n////\n\n/**  Draws the stage according to the display object\n * @param  {Object} dO displayOptions\n */\nDrawFunc.prototype.draw = function (dO) {\n\tthis.clearAll();\n\tif (dO.showNodes) this.drawNodes();\n\tif (dO.showCombinedFields) this.drawCombinedFields();\n\tif (dO.showPositiveField) this.drawPositiveField();\n\tif (dO.showNegativeField) this.drawNegativeField();\n\tif (dO.showWalkers) this.drawWalkers();\n};\n\nexport default DrawFunc;\n\nfunction transform(x, { max, min }, fineGrain) {\n\tconst tr = Math.log10(1 + (9 * fineGrain * (x - min)) / (max - min));\n\tif (tr < 1e-2) return 0;\n\tif (tr > 1) return 1;\n\treturn tr;\n}\n\nfunction hexToRGB(h) {\n\tlet r = 0,\n\t\tg = 0,\n\t\tb = 0;\n\n\tif (h.length == 4) {\n\t\tr = \"0x\" + h[1] + h[1];\n\t\tg = \"0x\" + h[2] + h[2];\n\t\tb = \"0x\" + h[3] + h[3];\n\t} else if (h.length == 7) {\n\t\tr = \"0x\" + h[1] + h[2];\n\t\tg = \"0x\" + h[3] + h[4];\n\t\tb = \"0x\" + h[5] + h[6];\n\t}\n\n\treturn \"\" + +r + \",\" + +g + \",\" + +b + \"\";\n}\n","import React, { useRef, useEffect, memo } from \"react\";\nimport DrawFunc from \"./js/draw\";\nimport \"./native.css\";\n\n/**\n * Component to render the fields in a canvas using the native canvas functions\n * @param  {Object} controller Class instance of a controller\n */\nconst NativeStage = ({ controller, updateStats, width, height }) => {\n\tconst uiRef = useRef();\n\tconst gameRef = useRef();\n\tconst backgroundRef = useRef();\n\n\tconst d = new DrawFunc(controller, width, height);\n\tconst callback = ({ id, frame }) => {\n\t\t// console.log(\"Id:\", id, \"\\n- Loop frame:\", frame);\n\t\tif (controller.engine.running) {\n\t\t\tcontroller.engine.next();\n\t\t\tcontroller.analysis.run();\n\t\t}\n\t\tupdateStats(controller);\n\n\t\td.draw(controller.analysis.displayOptions);\n\t};\n\n\tconst redraw = () => {\n\t\td.draw(controller.analysis.displayOptions);\n\t};\n\n\tconst id = randomString();\n\n\tconst onCanvasLoad = () => {\n\t\td.setup({\n\t\t\tui: uiRef.current,\n\t\t\tgame: gameRef.current,\n\t\t\tback: backgroundRef.current,\n\t\t});\n\t\tcontroller.setupRedraw(redraw);\n\t\tcontroller.setupLoop(id, callback);\n\t};\n\n\tuseEffect(() => {\n\t\tonCanvasLoad();\n\t});\n\n\treturn (\n\t\t<div className=\"stage\">\n\t\t\t<canvas id=\"ui-layer\" className=\"stage-canvas\" ref={uiRef}></canvas>\n\t\t\t<canvas id=\"game-layer\" className=\"stage-canvas\" ref={gameRef}></canvas>\n\t\t\t<canvas\n\t\t\t\tid=\"background-layer\"\n\t\t\t\tclassName=\"stage-canvas\"\n\t\t\t\tref={backgroundRef}\n\t\t\t></canvas>\n\t\t</div>\n\t);\n};\n\nexport default memo(NativeStage);\n\nfunction randomString() {\n\tlet str = \"\";\n\tfor (let i = 0; i < 10; i++) {\n\t\tstr += Math.floor(Math.random() * 9).toString();\n\t}\n\treturn str;\n}\n","import React, { useContext } from \"react\";\nimport { simulationContext } from \"../../../Simulation/context/SimulationContext\";\nimport { statsContext } from \"../../../Simulation/context/StatsContext\";\nimport NativeStage from \"./native/index\";\nimport \"./Stage.css\";\n\nconst Stage = ({ width }) => {\n\tconst { controller } = useContext(simulationContext);\n\tconst { updateStats } = useContext(statsContext);\n\n\tconst fixHeight = width => {\n\t\tconst height = Math.ceil(\n\t\t\t(width / controller.env.size[0]) * controller.env.size[1]\n\t\t);\n\t\tif (height / width < 0.8) return Math.floor(width * 0.8);\n\t\tif (height / width > 1.3) return Math.floor(width * 1.3);\n\t\treturn height;\n\t};\n\n\tconst height = fixHeight(width);\n\n\treturn (\n\t\t<div className=\"stage-container\" style={{ height }}>\n\t\t\t<NativeStage\n\t\t\t\tcontroller={controller}\n\t\t\t\tupdateStats={updateStats}\n\t\t\t\twidth={width}\n\t\t\t\theight={height}\n\t\t\t></NativeStage>\n\t\t\t<div className=\"stage-overlay\">Frame: {controller.engine.counter}</div>\n\t\t</div>\n\t);\n};\n\nexport default Stage;\n","const margin = {\n\ttop: 100,\n\tleft: 100,\n\tbottom: 100,\n\tright: 50,\n};\n\nconst offset = {\n\tx: 20,\n\ty: 20,\n};\n\nconst axisStep = {\n\tx: 500,\n\ty: 10,\n};\n\nconst tickStep = {\n\tx: 100,\n\ty: 1,\n};\n\nconst colorArray = [\n\t\"rgb(135, 202, 255)\",\n\t\"rgb(255, 152, 0)\",\n\t\"rgb(233, 30, 99)\",\n\t\"rgb(205, 220, 57)\",\n\t\"rgb(156, 39, 176)\",\n\t\"rgb(0, 150, 138)\",\n];\n\nconst tickTextSize = \"30\";\n\nconst maxNumberOfTicks = 10;\n\nconst tickLength = 8;\n\nconst pointSize = 6;\n\nconst cursorResolutionDistance = 20;\n\nfunction Plot(canvas) {\n\tthis.name = \"connectivity plot\";\n\tthis.canvas = canvas;\n\tthis.width = canvas.width;\n\tthis.height = canvas.height;\n\tthis.ctx = canvas.getContext(\"2d\");\n\tthis.data = [];\n\tthis.origin = [margin.left, this.height - margin.bottom];\n\tthis.YAxisEnd = [margin.left, margin.top];\n\tthis.XAxisEnd = [this.width - margin.right, this.height - margin.bottom];\n\tthis.xScale = null;\n\tthis.yScale = null;\n\tthis.xMousePosition = null;\n\tthis.yMousePosition = null;\n\tthis.cursorTime = null;\n\tthis.versions = [];\n\n\tthis.clear();\n\tthis.setAxis();\n\n\tthis.setMousePosition = this.setMousePosition.bind(this);\n}\n\nPlot.prototype.clear = function () {\n\tthis.ctx.clearRect(0, 0, this.width, this.height);\n};\n\nPlot.prototype.setAxis = function () {\n\tthis.setXAxis();\n\tthis.setYAxis();\n};\n\nPlot.prototype.setYAxis = function () {\n\tconst yAxisPoints = [this.origin, this.YAxisEnd];\n\tthis.useAxisLineStyle();\n\tthis.makeLineThroughPoints(yAxisPoints);\n};\n\nPlot.prototype.setXAxis = function () {\n\tconst xAxisPoints = [this.origin, this.XAxisEnd];\n\tthis.useAxisLineStyle();\n\tthis.makeLineThroughPoints(xAxisPoints);\n};\n\nPlot.prototype.makeLineThroughPoints = function (points) {\n\tthis.ctx.beginPath();\n\tthis.ctx.moveTo(points[0][0], points[0][1]);\n\tpoints.slice(1).forEach((coord) => this.ctx.lineTo(coord[0], coord[1]));\n\tthis.ctx.stroke();\n\tthis.ctx.closePath();\n};\n\nPlot.prototype.useAxisLineStyle = function () {\n\tthis.ctx.lineWidth = 2;\n\tthis.ctx.strokeStyle = \"white\";\n};\n\nPlot.prototype.draw = function (data) {\n\tif (data !== undefined) {\n\t\tthis.data = data;\n\t}\n\tthis.findVersions();\n\tthis.setScale();\n\tthis.addAxisTicks();\n\tthis.addPoints();\n};\n\nPlot.prototype.findVersions = function () {\n\tthis.versions = [];\n\tthis.data.forEach(({ version }) => {\n\t\tif (!this.versions.includes(version)) {\n\t\t\tthis.versions.push(version);\n\t\t}\n\t});\n\tthis.versions = this.versions.map((version, i) => {\n\t\treturn { version, color: colorArray[i % colorArray.length] };\n\t});\n};\n\nPlot.prototype.setScale = function () {\n\tthis.getMaxValues();\n\tthis.roundMaxValues();\n\tthis.determineScale();\n};\n\nPlot.prototype.getMaxValues = function () {\n\tthis.maxX = this.getMaxValueForProperty(\"time\");\n\tthis.maxY = this.getMaxValueForProperty(\"E\");\n};\n\nPlot.prototype.getMaxValueForProperty = function (property) {\n\tlet max = null;\n\tthis.data.forEach((point) => {\n\t\tif (max == null) {\n\t\t\tmax = point[property];\n\t\t} else if (point[property] > max) {\n\t\t\tmax = point[property];\n\t\t}\n\t});\n\treturn max ? max : 0;\n};\n\nPlot.prototype.roundMaxValues = function () {\n\tthis.roundedWidth = (Math.floor(this.maxX / axisStep.x) + 1) * axisStep.x;\n\tthis.roundedHeight = (Math.floor(this.maxY / axisStep.y) + 1) * axisStep.y;\n};\n\nPlot.prototype.determineScale = function () {\n\tthis.xScale = this.getXScale();\n\tthis.yScale = this.getYScale();\n};\n\nPlot.prototype.getXScale = function () {\n\tconst adjustedWidth = this.width - margin.left - margin.right - offset.x;\n\treturn adjustedWidth / this.roundedWidth;\n};\n\nPlot.prototype.getYScale = function () {\n\tconst adjustedHeight = this.height - margin.top - margin.bottom - offset.y;\n\treturn adjustedHeight / this.roundedHeight;\n};\n\nPlot.prototype.addAxisTicks = function () {\n\tthis.addXTicks();\n\tthis.addYTicks();\n};\n\nPlot.prototype.y = function (y) {\n\treturn Math.round(this.height - margin.bottom - offset.y - y * this.yScale);\n};\n\nPlot.prototype.yinv = function (yPixel) {\n\treturn Math.round(\n\t\t(this.height - margin.bottom - offset.y - yPixel) / this.yScale\n\t);\n};\n\nPlot.prototype.x = function (x) {\n\treturn Math.round(margin.left + offset.x + x * this.xScale);\n};\n\nPlot.prototype.xinv = function (xPixel) {\n\treturn Math.round((xPixel - margin.left - offset.x) / this.xScale);\n};\n\nPlot.prototype.addXTicks = function () {\n\tconst numberOfTicks = Math.ceil(this.roundedWidth / tickStep.x);\n\tfor (let i = 0; i < numberOfTicks; i += 1 + Math.floor(numberOfTicks / 10)) {\n\t\tconst value = i * tickStep.x;\n\t\tconst x = this.x(value);\n\t\tconst y = this.height - margin.bottom;\n\t\tthis.drawVerticalTick([x, y]);\n\t\tconst xTick = x;\n\t\tconst yTick = y + Math.floor(tickTextSize * 1.5);\n\t\tthis.writeTickText([xTick, yTick], value.toString());\n\t}\n};\n\nPlot.prototype.addYTicks = function () {\n\tconst numberOfTicks = Math.ceil(this.roundedHeight / tickStep.y);\n\tfor (let j = 0; j < numberOfTicks; j += 1 + Math.floor(numberOfTicks / 10)) {\n\t\tconst value = j * tickStep.y;\n\t\tconst x = margin.left;\n\t\tconst y = this.y(value);\n\t\tthis.drawHorizontalTick([x, y]);\n\t\tconst xTick = x - tickTextSize * 2;\n\t\tconst yTick = y + Math.round(+tickTextSize / 2);\n\t\tthis.writeTickText([xTick, yTick], value.toString());\n\t}\n};\n\nPlot.prototype.drawVerticalTick = function (coord) {\n\tthis.useTickLineStyle();\n\tconst tickEndPoint = [coord[0], coord[1] + tickLength];\n\tconst linePoints = [coord, tickEndPoint];\n\tthis.makeLineThroughPoints(linePoints);\n};\n\nPlot.prototype.writeTickText = function (coord, text) {\n\tthis.useTickTextStyle();\n\tthis.ctx.fillText(text, coord[0], coord[1]);\n};\nPlot.prototype.useTickTextStyle = function () {\n\tthis.ctx.font = tickTextSize + \"px monospace\";\n\tthis.ctx.fillStyle = \"white\";\n};\n\nPlot.prototype.drawHorizontalTick = function (coord) {\n\tthis.useTickLineStyle();\n\tconst tickEndPoint = [coord[0] - tickLength, coord[1]];\n\tconst linePoints = [coord, tickEndPoint];\n\tthis.makeLineThroughPoints(linePoints);\n};\n\nPlot.prototype.useTickLineStyle = function () {\n\tthis.ctx.lineWidth = 1;\n\tthis.ctx.strokeStyle = \"white\";\n};\n\nPlot.prototype.addPoints = function () {\n\tthis.drawPoints();\n};\n\nPlot.prototype.usePointStyle = function (label) {\n\tconst version = this.versions.find(({ version }) => version === label);\n\tthis.ctx.fillStyle = version.color;\n};\n\nPlot.prototype.drawPoints = function () {\n\tthis.data.forEach((el) => {\n\t\tconst x = this.x(el.time);\n\t\tconst y = this.y(el.E);\n\t\tthis.usePointStyle(el.version);\n\t\tthis.drawCircle([x, y]);\n\t});\n};\n\nPlot.prototype.drawCircle = function (coord) {\n\tthis.ctx.beginPath();\n\tthis.ctx.arc(...coord, pointSize, 0, 2 * Math.PI);\n\tthis.ctx.fill();\n\tthis.ctx.closePath();\n};\n\nPlot.prototype.setMousePosition = function ({ layerX, layerY }) {\n\tthis.xMousePosition = Math.round(\n\t\t(layerX * this.width) / this.canvas.offsetWidth\n\t);\n\tthis.yMousePosition = Math.round(\n\t\t(layerY * this.height) / this.canvas.offsetHeight\n\t);\n\tthis.processMouse();\n};\n\nPlot.prototype.processMouse = function () {\n\tthis.clearCursor();\n\tif (this.isMouseInChart()) {\n\t\tthis.checkMouseNeighborhood();\n\t\tthis.setCursor();\n\t}\n};\n\nPlot.prototype.clearCursor = function () {\n\tthis.clear();\n\tthis.setAxis();\n\tthis.draw();\n};\n\nPlot.prototype.isMouseInChart = function () {\n\tconst xCondition =\n\t\tmargin.left <= this.xMousePosition &&\n\t\tthis.xMousePosition <= this.width - margin.right;\n\tconst yCondition =\n\t\tmargin.top <= this.yMousePosition &&\n\t\tthis.yMousePosition <= this.height - margin.bottom;\n\n\treturn xCondition && yCondition;\n};\n\nPlot.prototype.checkMouseNeighborhood = function () {\n\tlet distance = cursorResolutionDistance;\n\tlet neighborTime = null;\n\tthis.data\n\t\t.map((point) => point.time)\n\t\t.forEach((time) => {\n\t\t\tconst delay = Math.abs(this.x(time) - this.xMousePosition);\n\t\t\tif (delay < distance) {\n\t\t\t\tdistance = delay;\n\t\t\t\tneighborTime = time;\n\t\t\t}\n\t\t});\n\n\tthis.minMouseToPointDistance = distance;\n\tthis.mouseNeighborTime = neighborTime ? neighborTime : null;\n};\n\nPlot.prototype.setCursor = function () {\n\tif (this.isMouseNearPoint()) {\n\t\tthis.drawCursor();\n\t}\n};\n\nPlot.prototype.isMouseNearPoint = function () {\n\treturn this.minMouseToPointDistance < cursorResolutionDistance ? true : false;\n};\n\nPlot.prototype.drawCursor = function () {\n\tthis.useCursorStyle();\n\tconst xCursor = this.x(this.mouseNeighborTime);\n\tconst cursorStart = [xCursor, this.y(0)];\n\tconst cursorEnd = [xCursor, margin.top];\n\n\tthis.makeLineThroughPoints([cursorStart, cursorEnd]);\n};\n\nPlot.prototype.useCursorStyle = function () {\n\tthis.ctx.lineWidth = 4;\n\tthis.ctx.strokeStyle = \"rgba(0, 126, 226,0.7)\";\n};\nexport default Plot;\n","import React, { memo, useRef, useEffect } from \"react\";\nimport ConnectivityPlot from \"./Connectivity\";\nimport \"./Plots.css\";\n\nconst Plots = ({ data }) => {\n\tconst plotRef = useRef();\n\n\tuseEffect(() => {\n\t\tconst canvas = plotRef.current;\n\t\tconst Plot = new ConnectivityPlot(canvas);\n\n\t\tPlot.draw(data);\n\n\t\tcanvas.addEventListener(\"mousemove\", Plot.setMousePosition);\n\t\treturn () => {\n\t\t\tcanvas.removeEventListener(\"mousemove\", Plot.setMousePosition);\n\t\t};\n\t});\n\treturn (\n\t\t<canvas ref={plotRef} width={1200} height={600} className=\"plot\"></canvas>\n\t);\n};\n\nconst arePropsEqual = (prevProps, nextProps) => {\n\tif (prevProps.data === undefined || nextProps.data === undefined) {\n\t\treturn false;\n\t}\n\treturn prevProps.data.length === nextProps.data.length;\n};\n\nexport default memo(Plots, arePropsEqual);\n","import React, { useContext, useRef, useEffect } from \"react\";\nimport { statsContext } from \"../../../Simulation/context/StatsContext\";\nimport Plots from \"./Plots\";\n\nconst Analysis = ({ controller }) => {\n\tconst { stats } = useContext(statsContext);\n\tconst connectivityData = JSON.parse(\n\t\tJSON.stringify(stats.connectivity ? stats.connectivity : [])\n\t);\n\n\treturn (\n\t\t<div className=\"page analysis\">\n\t\t\t<div className=\"title\">Connectivity</div>\n\t\t\t<div className=\"body\">\n\t\t\t\t<Plots data={connectivityData}></Plots>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\nexport default Analysis;\n","import React, { useContext } from \"react\";\nimport { simulationContext } from \"../../Simulation/context/SimulationContext\";\nimport \"./Screen.css\";\nimport Settings from \"./Settings\";\nimport Environment from \"./Environment\";\nimport Layers from \"./Layers\";\nimport Layout from \"./Layout\";\nimport Stage from \"./Stage\";\nimport Analysis from \"./Analysis\";\n\nconst Screen = ({ display, closeMenu, width }) => {\n\tconst { controller } = useContext(simulationContext);\n\tconst renderPage = () => {\n\t\tswitch (display) {\n\t\t\tcase \"envr\":\n\t\t\t\treturn (\n\t\t\t\t\t<Environment\n\t\t\t\t\t\tcontroller={controller}\n\t\t\t\t\t\tcloseMenu={closeMenu}\n\t\t\t\t\t></Environment>\n\t\t\t\t);\n\t\t\tcase \"settg\":\n\t\t\t\treturn (\n\t\t\t\t\t<Settings controller={controller} closeMenu={closeMenu}></Settings>\n\t\t\t\t);\n\t\t\tcase \"layers\":\n\t\t\t\treturn <Layers controller={controller}></Layers>;\n\t\t\tcase \"layout\":\n\t\t\t\treturn <Layout controller={controller} closeMenu={closeMenu}></Layout>;\n\t\t\tcase \"path\":\n\t\t\t\treturn <Analysis controller={controller}></Analysis>;\n\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t};\n\treturn (\n\t\t<div className=\"screen\" style={{ width }}>\n\t\t\t<Stage width={width}></Stage>\n\t\t\t<div\n\t\t\t\tclassName=\"page-overlay\"\n\t\t\t\tstyle={{ height: display === \"none\" ? \"0px\" : \"100%\" }}\n\t\t\t>\n\t\t\t\t<div className=\"page-container\">{renderPage()}</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Screen;\n","import React, { useState, useEffect } from \"react\";\nimport { MenuItem, MenuContainer } from \"./Menu\";\nimport Screen from \"./Screen\";\nimport \"./Display.css\";\nimport SettingsIcon from \"./Icons/settings.svg\";\nimport NodesIcon from \"./Icons/nodes.svg\";\nimport TimeIcon from \"./Icons/time.svg\";\nimport PathIcon from \"./Icons/paths.svg\";\nimport ParamsIcon from \"./Icons/params.svg\";\nimport TabsIcon from \"./Icons/tabs.svg\";\n\nconst Display = () => {\n\tconst chooseWidth = width => (width > 700 ? 500 : width);\n\tconst [display, setDisplay] = useState(\"none\");\n\tconst [screenWidth, setScreenWidth] = useState(\n\t\tchooseWidth(window.innerWidth)\n\t);\n\n\tconst onResize = ({ target: { innerWidth } }) => {\n\t\tsetScreenWidth(chooseWidth(innerWidth));\n\t};\n\n\tuseEffect(() => {\n\t\twindow.addEventListener(\"resize\", onResize);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"resize\", onResize);\n\t\t};\n\t});\n\n\tconst menuClick = window => {\n\t\tconst newDisplay = display == window ? \"none\" : window;\n\t\tsetDisplay(newDisplay);\n\t};\n\n\tconst closeMenu = () => {\n\t\tsetDisplay(\"none\");\n\t};\n\n\tconst isActive = window => window == display;\n\treturn (\n\t\t<div className=\"display\">\n\t\t\t<MenuContainer className=\"l-menu menu\">\n\t\t\t\t<MenuItem\n\t\t\t\t\twindow=\"layers\"\n\t\t\t\t\talt=\"Layers\"\n\t\t\t\t\ticon={TabsIcon}\n\t\t\t\t\tmenuClick={menuClick}\n\t\t\t\t\tisActive={isActive}\n\t\t\t\t></MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\twindow=\"envr\"\n\t\t\t\t\talt=\"Environment\"\n\t\t\t\t\ticon={SettingsIcon}\n\t\t\t\t\tmenuClick={menuClick}\n\t\t\t\t\tisActive={isActive}\n\t\t\t\t></MenuItem>\n\t\t\t\t{/* <MenuItem\n\t\t\t\t\twindow=\"settg\"\n\t\t\t\t\talt=\"Settings\"\n\t\t\t\t\ticon={ParamsIcon}\n\t\t\t\t\tmenuClick={menuClick}\n\t\t\t\t\tisActive={isActive}\n\t\t\t\t></MenuItem> */}\n\t\t\t</MenuContainer>\n\t\t\t<Screen\n\t\t\t\tdisplay={display}\n\t\t\t\tcloseMenu={closeMenu}\n\t\t\t\twidth={screenWidth}\n\t\t\t></Screen>\n\t\t\t<MenuContainer className=\"r-menu menu\">\n\t\t\t\t<MenuItem\n\t\t\t\t\twindow=\"layout\"\n\t\t\t\t\talt=\"Layout\"\n\t\t\t\t\ticon={NodesIcon}\n\t\t\t\t\tmenuClick={menuClick}\n\t\t\t\t\tisActive={isActive}\n\t\t\t\t></MenuItem>\n\t\t\t\t{/* <MenuItem\n\t\t\t\t\twindow=\"schdl\"\n\t\t\t\t\talt=\"Scheduler\"\n\t\t\t\t\ticon={TimeIcon}\n\t\t\t\t\tmenuClick={menuClick}\n\t\t\t\t\tisActive={isActive}\n\t\t\t\t></MenuItem> */}\n\t\t\t\t<MenuItem\n\t\t\t\t\twindow=\"path\"\n\t\t\t\t\talt=\"Paths\"\n\t\t\t\t\ticon={PathIcon}\n\t\t\t\t\tmenuClick={menuClick}\n\t\t\t\t\tisActive={isActive}\n\t\t\t\t></MenuItem>\n\t\t\t</MenuContainer>\n\t\t</div>\n\t);\n};\n\nexport default Display;\n","import React, { useState } from \"react\";\nimport \"./BatchSimulation.css\";\n\nconst BatchSimulation = ({ controller }) => {\n\tconst [frames, setFrames] = useState(1000);\n\tconst [runs, setRuns] = useState(100);\n\n\tconst onFramesChange = ({ target: { value } }) => {\n\t\tif (Number.isInteger(+value) && +value <= 10000 && +value >= 1) {\n\t\t\tsetFrames(value);\n\t\t}\n\t};\n\tconst onRunsChange = ({ target: { value } }) => {\n\t\tif (Number.isInteger(+value) && +value <= 100 && +value >= 1) {\n\t\t\tsetRuns(value);\n\t\t}\n\t};\n\n\tconst onClick = () => {\n\t\tconst paramSubset = getParamSubset(controller);\n\n\t\tconst query = { ...paramSubset, runs, frames };\n\t\tconst serializedQuery = serialize(query);\n\t\twindow.open(\n\t\t\twindow.location.href + `/api?${serializedQuery}`,\n\t\t\t\"_blank\",\n\t\t\t\"directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=540,height=230\"\n\t\t);\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<span className=\"batch-label\">Run Batch:</span>\n\t\t\t<input\n\t\t\t\tclassName=\"batch-frames\"\n\t\t\t\tvalue={frames}\n\t\t\t\tdefaultValue={200}\n\t\t\t\tonChange={onFramesChange}\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"frames\"\n\t\t\t/>\n\t\t\t<span className=\"batch-frames-label\">frames</span>\n\t\t\t<input\n\t\t\t\tvalue={runs}\n\t\t\t\tclassName=\"batch-runs\"\n\t\t\t\tonChange={onRunsChange}\n\t\t\t\tdefaultValue={100}\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"runs\"\n\t\t\t/>\n\t\t\t<span className=\"batch-runs-label\">runs</span>\n\t\t\t<div className=\"batch-submit\" onClick={onClick}>\n\t\t\t\tStart\n\t\t\t</div>\n\t\t</React.Fragment>\n\t);\n};\n\nfunction getParamSubset(controller) {\n\tconsole.log(\"GETTING PARAM:\", controller.nodes);\n\tconst {\n\t\twalkers: { numberOfAgents },\n\t\tenv: { alpha, beta, k, epsilon, s0, size },\n\t\tnodes: { layoutId },\n\t} = controller;\n\treturn {\n\t\tnumberOfAgents,\n\t\talpha,\n\t\tbeta,\n\t\tsize,\n\t\tk,\n\t\tepsilon,\n\t\ts0,\n\t\tlayoutId,\n\t};\n}\n\nfunction getFormattedDate() {\n\tvar date = new Date();\n\tvar str =\n\t\tdate.getFullYear() +\n\t\t\"-\" +\n\t\t(date.getMonth() + 1) +\n\t\t\"-\" +\n\t\tdate.getDate() +\n\t\t\" \" +\n\t\tdate.getHours() +\n\t\t\":\" +\n\t\tdate.getMinutes() +\n\t\t\":\" +\n\t\tdate.getSeconds();\n\n\treturn str;\n}\n\nfunction serialize(obj) {\n\tvar str = [];\n\tfor (var p in obj)\n\t\tif (obj.hasOwnProperty(p)) {\n\t\t\tstr.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n\t\t}\n\treturn str.join(\"&\");\n}\n\nexport default BatchSimulation;\n","import React, { useState, useContext } from \"react\";\nimport { simulationContext } from \"../Simulation/context/SimulationContext\";\nimport { statsContext } from \"../Simulation/context/StatsContext\";\nimport BatchSimulation from \"./BatchSimulation\";\nimport BrightIcon from \"./Icons/bright.svg\";\nimport \"./InfoBar.css\";\n\nconst AntBar = numberOfAnts => {\n\treturn (\n\t\t<div className=\"ant-container\">\n\t\t\t{\" \"}\n\t\t\t{numberOfAnts}\n\t\t\t<span role=\"img\" alt=\"Ant counter\">\n\t\t\t\t\n\t\t\t</span>\n\t\t</div>\n\t);\n};\n\nconst InfoBar = () => {\n\tconst { controller } = useContext(simulationContext);\n\tconst {\n\t\tstats: { numberOfAnts }\n\t} = useContext(statsContext);\n\tconst [contrast, setContrast] = useState(1);\n\n\tconst changeContrast = ({ target: { value } }) => {\n\t\tcontroller.setContrast(+value);\n\t\tsetContrast(+value);\n\t};\n\treturn (\n\t\t<div className=\"info-bar\">\n\t\t\t<BatchSimulation controller={controller}></BatchSimulation>\n\t\t\t<div style={{ flexGrow: 1 }}></div>\n\t\t\t{numberOfAnts ? AntBar(numberOfAnts) : \"\"}\n\t\t\t<img\n\t\t\t\tclassName=\"contrast-img\"\n\t\t\t\talt={\"contrast\"}\n\t\t\t\tsrc={BrightIcon}\n\t\t\t\twidth=\"15px\"\n\t\t\t></img>\n\t\t\t<div className=\"contrast-container\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"range\"\n\t\t\t\t\tmin=\"0\"\n\t\t\t\t\tmax=\"10\"\n\t\t\t\t\tvalue={contrast}\n\t\t\t\t\tonChange={changeContrast}\n\t\t\t\t\tclass=\"contrast-slider\"\n\t\t\t\t\tid=\"contrastSlider\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default InfoBar;\n","import React, { Component } from \"react\";\nimport Display from \"./Display\";\nimport InfoBar from \"./InfoBar\";\n\nclass Main extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = { screenWidth: null };\n\t\tthis.updateWindowDimensions = this.updateWindowDimensions.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener(\"resize\", this.updateWindowDimensions());\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"resize\", this.updateWindowDimensions);\n\t}\n\n\tupdateWindowDimensions() {\n\t\tthis.setState({ screenWidth: window.innerWidth });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"main\">\n\t\t\t\t<InfoBar></InfoBar>\n\t\t\t\t<Display></Display>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Main;\n","import React from \"react\";\nimport \"./Footer.css\";\n\nconst Footer = () => {\n\treturn (\n\t\t<div className=\"footer\">\n\t\t\tMade by <a href=\"http://www.jordi.co\">Jordi</a>\n\t\t</div>\n\t);\n};\n\nexport default Footer;\n","import React from \"react\";\nimport { SimulationContextProvider } from \"./Simulation/context/SimulationContext\";\nimport { StatsContextProvider } from \"./Simulation/context/StatsContext\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport \"./App.css\";\nimport Header from \"./Header/Header.js\";\nimport About from \"./About\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\n\nfunction App() {\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<SimulationContextProvider>\n\t\t\t\t<StatsContextProvider>\n\t\t\t\t\t<Router>\n\t\t\t\t\t\t<Header></Header>\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route path=\"/about\">\n\t\t\t\t\t\t\t\t<About></About>\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t\t\t\t<Main></Main>\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t<Footer></Footer>\n\t\t\t\t\t</Router>\n\t\t\t\t</StatsContextProvider>\n\t\t\t</SimulationContextProvider>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}